<div class="main-container container-fluid">
  <div class="col-auto justify-content-center align-content-center h-100">
    <div class="d-flex row mb-4">
      <h1 class="d-flex align-items-center">
        <i class="pi pi-chevron-left me-3 go-back-buttom" (click)="goHome()"></i> BÃºsqueda de productos
      </h1>
    </div>
    <div class="row">
      <p-dataview #dv [value]="products" [layout]="layout" toggleButtonProps="">
        <ng-template #header>
          <p-panel [toggleable]="true" toggler="icon">
            <ng-template #header>
              <div class="d-flex justify-content-between align-items-center">
                <p-selectbutton [(ngModel)]="layout" [options]="options" [allowEmpty]="false">
                  <ng-template #item let-item>
                    <i class="pi " [ngClass]="{ 'pi-bars': item === 'list', 'pi-table': item === 'grid' }"></i>
                  </ng-template>
                </p-selectbutton>
              </div>
            </ng-template>
            <ng-template #headericons>
              <i class="pi pi-filter" style="font-size: 1rem;"></i>
            </ng-template>
            <p class="m-0">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore magna
              aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat. Duis
              aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
              Excepteur sint
              occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
          </p-panel>
          <!-- <div class="d-flex justify-content-between align-items-center">
            <p-selectbutton [(ngModel)]="layout" [options]="options" [allowEmpty]="false">
              <ng-template #item let-item>
                <i class="pi " [ngClass]="{ 'pi-bars': item === 'list', 'pi-table': item === 'grid' }"></i>
              </ng-template>
            </p-selectbutton>
            <p-button severity="secondary"><i class="pi pi-filter" style="font-size: 1rem;"></i></p-button>
          </div> -->
        </ng-template>
        <ng-template #list let-items>
          <div class="p-3">
            @for (item of items; track $index) {
            <div class="d-flex border rounded flex-row p-4 gap-3" [class.mt-3]="$index != 0">
              <div class="position-relative">
                <img class="d-block mx-auto rounded image" [src]="item.urlImagen" [alt]="item.nombre" />
                <p-tag [value]="item.estado.replace('_', ' ')" [severity]="getSeverity(item)"
                  class="position-absolute bg-dark" style="left: 4px; top: 4px;"></p-tag>
              </div>
              <div
                class="d-flex flex-column flex-md-row justify-content-between align-items-md-start flex-grow-1 gap-4">
                <div class="d-flex flex-row flex-md-column justify-content-evenly align-items-start gap-2">
                  <div>
                    <div class="fw-medium fs-5 mt-2">{{ item.nombre }}</div>
                    <span class="fw-medium text-secondary small">{{ item.categoria.nombre }}</span>
                  </div>
                </div>
                <div class="d-flex flex-column align-items-md-end gap-3">
                  <div class="d-flex flex-row-reverse flex-md-row gap-2">
                    <p-button icon="pi pi-thumbs-up" label="Solicitar"
                      [disabled]="item.inventoryStatus === 'OUTOFSTOCK'"
                      class="flex-grow-1 flex-md-grow-0 text-nowrap"></p-button>
                  </div>
                </div>
              </div>
            </div>
            }
          </div>
        </ng-template>
        <ng-template #grid let-items>
          <div class="d-inline-flex row g-3 p-3">
            @for (item of items; track $index) {
            <div class="p-4 mx-2 border rounded col card">
              <div class="d-flex justify-content-center rounded p-3">
                <div class="position-relative mx-auto">
                  <img class="rounded card-image" [src]="item.urlImagen" [alt]="item.nombre">
                  <p-tag [value]="item.estado.replace('_', ' ')" [severity]="getSeverity(item)"
                    class="position-absolute bg-dark" style="left: 4px; top: 4px;"></p-tag>
                </div>
              </div>
              <div class="pt-4">
                <div class="d-flex flex-row justify-content-between align-items-start gap-2">
                  <div>
                    <div class="fw-medium fs-5 mt-1">{{ item.nombre }}</div>
                    <span class="fw-medium text-secondary small">{{ item.categoria.nombre }}</span>
                  </div>
                </div>
                <div class="d-flex flex-column gap-3 mt-4">
                  <div class="d-flex gap-2">
                    <p-button icon="pi pi-thumbs-up" label="Solicitar" class="flex-grow-1 text-nowrap"></p-button>
                  </div>
                </div>
              </div>
            </div>
            }
          </div>
        </ng-template>
      </p-dataview>
    </div>
  </div>
</div>