<div class="container align-items-center justify-content-center">
    <div id="card" class="col-md-3 m-auto">
        <p-card class="shadow-lg px-4">
            <div class="text-center mb-5 mt-4">
                <h1 class="fw-bold m-0">Crear una cuenta</h1>
                <p class="text-sm m-0 mt-1">Bienvenido. Comencemos.</p>
            </div>
            <form class="mb-4" [formGroup]="userForm" (ngSubmit)="onSubmit()">
                <div class="my-4" [ngClass]="[(!validForm && userForm.get('email')?.invalid)? '' : 'pb-2']">
                    <label class="form-label" for="email">Correo electrónico</label>
                    <input class="w-100 mt-1" id="email" pInputText placeholder="tu-correo@ejemplo.com" type="email"
                        formControlName="email" [invalid]="!validForm && userForm.get('email')?.invalid" />
                    @if (!validForm && userForm.get('email')?.invalid) {
                        <p-message severity="error" size="small" variant="simple">Ingrese un mail válido.</p-message>
                    }
                </div>
                <div class="my-4" [ngClass]="[(!validForm && userForm.get('password')?.invalid)? '' : 'pb-2']">
                    <label class="form-label" for="password">Contraseña</label>
                    <p-password class="mt-1" formControlName="password" placeholder="Crea una contraseña"
                        weakLabel="Muy simple" mediumLabel="Medianamente segura" strongLabel="Compleja"
                        promptLabel="Ingrese una contraseña" [feedback]="true" [toggleMask]="true" fluid
                        [invalid]="!validForm && userForm.get('password')?.invalid">
                        <ng-template #footer>
                            <p-divider />
                            <ul class="ms-2 p-0 leading-normal" style="list-style: none;">
                                <li class="flex items-center">
                                    @if(userForm.get('password')?.getError('minlength')
                                    || userForm.get('password')?.getError('required')){
                                    <i class="pi pi-times-circle me-1" style="color: red"></i>
                                    }@else{
                                    <i class="pi pi-check-circle me-1" style="color: green"></i>
                                    }
                                    Mínimo 8 caracteres
                                </li>
                                <li class="flex items-center">
                                    @if(userForm.get('password')?.getError('missingSpecialChar')
                                    || userForm.get('password')?.getError('required')){
                                    <i class="pi pi-times-circle me-1" style="color: red"></i>
                                    }@else{
                                    <i class="pi pi-check-circle me-1" style="color: green"></i>
                                    }
                                    Símbolos (ej. !@#$)
                                </li>
                                <li class="flex items-center">
                                    @if(userForm.get('password')?.getError('missingUpperCase')
                                    || userForm.get('password')?.getError('required')){
                                    <i class="pi pi-times-circle me-1" style="color: red"></i>
                                    }@else{
                                    <i class="pi pi-check-circle me-1" style="color: green"></i>
                                    }
                                    Al menos una mayúscula
                                </li>
                                <li class="flex items-center">
                                    @if(userForm.get('password')?.getError('missingNumber')
                                    || userForm.get('password')?.getError('required')){
                                    <i class="pi pi-times-circle me-1" style="color: red"></i>
                                    }@else{
                                    <i class="pi pi-check-circle me-1" style="color: green"></i>
                                    }
                                    Números
                                </li>
                            </ul>
                        </ng-template>
                    </p-password>
                    @if (!validForm && userForm.get('password')?.invalid) {
                        <p-message severity="error" size="small" variant="simple">Ingrese una contraseña válida.</p-message>
                    }
                </div>
                <div class="my-4" [ngClass]="[(!validForm && userForm.get('confirmPassword')?.invalid && userForm.get('password')?.valid)? '' : 'pb-2']">
                    <label class="form-label" for="confirm-password">Confirmar contraseña</label>
                    <input class="w-100 mt-1" id="confirm-password" pInputText placeholder="Confirma tu contraseña"
                        type="password" formControlName="confirmPassword"
                        [invalid]="!validForm && userForm.get('confirmPassword')?.invalid && userForm.get('password')?.valid" />
                    @if (!validForm && userForm.get('confirmPassword')?.invalid && userForm.get('password')?.valid) {
                        <p-message severity="error" size="small" variant="simple">Las contraseñas no coinciden.</p-message>
                    }
                </div>
                <div class="row mb-4 justify-content-md-center">
                    <div class="col-md-auto w-100">
                        <p-button styleClass="w-100" type="submit">Regístrate</p-button>
                    </div>
                </div>
            </form>
        </p-card>
    </div>
</div>