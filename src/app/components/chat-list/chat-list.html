<div class="main-container container-fluid">
  <div
    class="container-fluid d-flex flex-column justify-content-start align-items-stretch h-100 p-0"
  >
    <div class="d-flex p-0 mb-4 flex-shrink-0">
      <h1 class="d-flex align-items-center m-0">
        <i class="pi pi-chevron-left me-3 go-back-buttom" (click)="goHome()"></i> Chats
      </h1>
    </div>
    <div class="d-flex p-0 flex-grow-1 overflow-hidden">
      <div class="col-12 col-md-auto p-0 pe-3 chat-list">
        @if(shouldShowMobileVersion()){
        <router-outlet />
        }@else{
        <p-tabs [value]="defaultTab">
          <p-tablist>
            <p-tab value="0">Mis productos</p-tab>
            <p-tab value="1">Mis solicitudes</p-tab>
          </p-tablist>
          <p-tabpanels>
            <p-tabpanel value="0">
              <p-dataview #dv [value]="myRequetsChats" class="my-requests">
                <ng-template #list>
                  @for (chat of myRequetsChats; track $index) { @if($index != 0){
                  <p-divider />
                  }
                  <div
                    class="d-flex flex-row justify-content-between px-2 py-3"
                    (click)="loadChat(chat)"
                  >
                    <div class="col-auto align-content-center me-2">
                      @if(chat.solicitud.donador.urlImagen){
                      <p-avatar
                        size="large"
                        shape="circle"
                        [image]="chat.solicitud.donador.urlImagen"
                      />
                      }@else {
                      <p-avatar size="large" shape="circle" icon="pi pi-gift" />
                      }
                    </div>
                    <div class="col">
                      <div class="flex-md-column justify-content-evenly align-items-start gap-2">
                        <div class="fw-medium fs-5">
                          {{ chat.solicitud.donador.alias }}
                        </div>
                      </div>
                    </div>
                  </div>
                  }
                </ng-template>
              </p-dataview>
            </p-tabpanel>
            <p-tabpanel value="1">
              <p-dataview #dv [value]="myProductsChats" class="my-requests">
                <ng-template #list>
                  @for (chat of myProductsChats; track $index) { @if($index != 0){
                  <p-divider />
                  }
                  <div
                    class="d-flex flex-row justify-content-between px-2 py-3"
                    (click)="loadChat(chat)"
                  >
                    <div class="col-auto align-content-center me-2">
                      @if(chat.solicitud.solicitante.urlImagen){
                      <p-avatar
                        size="large"
                        shape="circle"
                        [image]="chat.solicitud.solicitante.urlImagen"
                      />
                      }@else {
                      <p-avatar size="large" shape="circle" icon="pi pi-gift" />
                      }
                    </div>
                    <div class="col">
                      <div class="flex-md-column justify-content-evenly align-items-start gap-2">
                        <div class="fw-medium fs-5">
                          {{ chat.solicitud.solicitante.alias }}
                        </div>
                      </div>
                    </div>
                  </div>
                  }
                </ng-template>
              </p-dataview>
            </p-tabpanel>
          </p-tabpanels>
        </p-tabs>
        }
      </div>
      <div class="d-none d-md-block flex-grow-1 ps-3 overflow-auto">
        <router-outlet />
      </div>
    </div>
  </div>
</div>
