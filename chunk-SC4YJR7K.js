import{b as ie,d as re}from"./chunk-LCUBCCJ2.js";import{b as oe}from"./chunk-THLGVQOA.js";import"./chunk-7NKSXQ2E.js";import{a as ee,b as te}from"./chunk-4RUQD4IH.js";import"./chunk-IUTEPSDB.js";import{a as ne,b as ae}from"./chunk-JQLK4AHE.js";import{a as le}from"./chunk-CB6J6BBJ.js";import"./chunk-RSHBZTWH.js";import{a as q,b as G}from"./chunk-AVGQIJ4R.js";import"./chunk-J7ZDMBSI.js";import"./chunk-DVFEINU7.js";import"./chunk-PDTI4AWR.js";import{a as X}from"./chunk-LK2RJHE2.js";import{b as Y}from"./chunk-7AHVG7ZA.js";import{b as W}from"./chunk-T4MU4AB4.js";import"./chunk-BOTTEXY6.js";import"./chunk-FQGKTMLL.js";import"./chunk-DTLGCBUS.js";import"./chunk-7QH3DEV4.js";import{a as J}from"./chunk-TDFDGLCL.js";import{a as K}from"./chunk-DW6VR7TT.js";import"./chunk-QD7ZASQF.js";import"./chunk-7QJ2EETJ.js";import"./chunk-EL5SIMWJ.js";import"./chunk-FKOEVO4B.js";import{b as $}from"./chunk-M7F2YWVM.js";import{a as H}from"./chunk-D5OLY3RM.js";import{C as U,D as Q,n as B}from"./chunk-CQCVERZP.js";import{ba as O}from"./chunk-4G3JCKZK.js";import"./chunk-4O3FVBGX.js";import{D as Z,j as F,l as j,x as R}from"./chunk-QOJUQ6XD.js";import{$b as h,Db as L,Dc as S,Ec as C,Fb as k,Gb as V,Hb as m,Ib as r,Jb as i,Kb as p,Rb as y,Va as T,Wb as v,Xb as f,Za as n,ac as _,bc as b,ea as c,gc as x,ja as u,jb as I,jc as s,ka as g,kc as w,la as E,ma as M,mc as N,pb as A,qc as z,rc as D,zc as P}from"./chunk-A4JG42N6.js";var me=["dataView"],pe=["scrollContainer"],de=()=>({severity:"contrast",raised:!0,rounded:!0});function ue(a,t){if(a&1){let e=y();r(0,"div",13)(1,"div",14),p(2,"img",15)(3,"p-tag",16),i(),r(4,"div",17)(5,"div",18)(6,"div")(7,"div",19),s(8),i(),r(9,"span",20),s(10),P(11,"currency"),P(12,"currency"),i(),p(13,"br"),r(14,"span",21),s(15),i()()(),r(16,"div",22)(17,"div",23)(18,"p-button",24),v("onClick",function(){let o=u(e).$implicit,d=f(2);return g(d.editProyect(o.id))}),i(),r(19,"p-button",25),v("onClick",function(o){let d=u(e).$implicit,se=f(2);return g(se.deleteProyect(o,d.id))}),i()()()()()}if(a&2){let e=t.$implicit,l=t.$index,o=f(2);x("mt-3",l!=0),n(2),m("src",e.imagenes[0]==null?null:e.imagenes[0].urlImagen,T)("alt",e.nombre),n(),m("value",e.estado.replaceAll("_"," "))("severity",o.getSeverity(e)),n(5),w(e.nombre),n(2),N("( ",S(11,12,e.recaudado,"ARS","symbol","1.2-2")," / ",S(12,17,e.objetivo,"ARS","symbol","1.2-2")," )"),n(5),w(e.descripcion),n(3),m("disabled",e.recaudado>0||e.estado!=="ACTIVO"),n(),m("disabled",e.recaudado>0||e.estado!=="ACTIVO")}}function ge(a,t){if(a&1&&(r(0,"div"),k(1,ue,20,22,"div",12,L),i()),a&2){let e=t.$implicit;x("p-3",!e),n(),V(e)}}function ve(a,t){a&1&&(r(0,"div",26),E(),r(1,"svg",27)(2,"metadata"),s(3,"Created by potrace 1.10, written by Peter Selinger 2001-2011"),i(),r(4,"g",28),p(5,"path",29)(6,"path",30)(7,"path",31)(8,"path",32)(9,"path",33)(10,"path",34),i()(),M(),r(11,"h2"),s(12,"No hay publicaciones"),i(),r(13,"span"),s(14,"No has publicado ning\xFAn proyecto a\xFAn."),i()())}var ce=class a{dataView;scrollContainer;router=c(R);toasts=c(Z);loginService=c(H);permissionsService=c(K);userService=c(X);proyectService=c(le);confirmationService=c(O);logedUser;collapsed=!0;name;selectedState;proyects;filters={};organizations;selectedOrganization;statesOptions=[{name:"Activos",state:"ACTIVO"},{name:"Cancelados",state:"CANCELADO"},{name:"Objetivo logrado",state:"FINALIZADO_EXITOSO"},{name:"No alcanz\xF3 objetivo",state:"FINALIZADO_NO_EXITOSO"}];ngOnInit(){this.loginService.getLoggedUser().subscribe(t=>{if(this.logedUser=t,t==null){this.router.navigate(["/login"]);return}if(!this.permissionsService.canAccessRoute(t,this.router.url)){this.router.navigate(["/principal"]);return}}),this.getProyects()}getProyects(){this.proyectService.getProyects(this.logedUser?.id,null,null).subscribe({next:t=>{this.proyects=t},error:()=>{this.toasts.showToast({severity:"error",summary:"Error al obtener proyectos",detail:"No pudimos obtener los proyectos publicados, intente nuevamente..."})}})}getSeverity(t){switch(t.estado){case"ACTIVO":return"success";case"CANCELADO":return"danger";case"FINALIZADO_EXITOSO":return"warn";case"FINALIZADO_NO_EXITOSO":return"danger";default:return"success"}}goHome(){this.router.navigate(["/principal"])}editProyect(t){this.proyectService.setIdProyect(t),this.router.navigate(["/principal/editar-proyecto"])}deleteProyect(t,e){this.confirmationService.confirm({target:t.target,message:"Est\xE1s seguro de eliminar la publicaci\xF3n?",header:"Eliminiar publicaci\xF3n",closable:!0,closeOnEscape:!0,icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Eliminar"},accept:()=>{this.proyectService.deleteProyect(e).subscribe({next:()=>{this.toasts.showToast({severity:"success",summary:"Publicaci\xF3n eliminada",detail:"Se elimin\xF3 correctamente la publicaci\xF3n"}),this.getProyects()},error:()=>{this.toasts.showToast({severity:"error",summary:"Publicaci\xF3n no eliminada",detail:"Error al eliminar la publicaci\xF3n, intente nuevamente..."})}})},reject:()=>{}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=I({type:a,selectors:[["app-org-proyect-list"]],viewQuery:function(e,l){if(e&1&&(h(me,5),h(pe,5)),e&2){let o;_(o=b())&&(l.dataView=o.first),_(o=b())&&(l.scrollContainer=o.first)}},features:[z([O])],decls:16,vars:4,consts:[["scrollContainer",""],["dv",""],["list",""],["emptymessage",""],["id","main",1,"main-container","container-fluid"],[1,"col-auto","justify-content-center","align-content-center","h-100"],[1,"d-flex","row","mb-2"],[1,"d-flex","align-items-center","mb-0"],[1,"pi","pi-chevron-left","me-3","go-back-buttom",3,"click"],[1,"row"],["layout","list","toggleButtonProps","",3,"value"],["target","parent","icon","pi pi-arrow-up",3,"threshold","buttonProps"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list",3,"mt-3"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list"],[1,"position-relative"],[1,"d-block","mx-auto","rounded","image",3,"src","alt"],[1,"position-absolute","bg-dark",2,"left","4px","top","4px",3,"value","severity"],[1,"d-flex","flex-column","flex-sm-row","justify-content-between","align-items-start","flex-grow-1","gap-4"],[1,"d-flex","flex-row","flex-md-column","justify-content-evenly","align-items-start","gap-2"],[1,"fw-medium","fs-5"],[1,"fw-medium","text-secondary","small"],[1,"fw-medium","small"],[1,"d-flex","flex-column","align-items-md-end","gap-3"],[1,"d-flex","flex-row-reverse","flex-md-row","gap-2"],["icon","pi pi-pencil","label","Editar",1,"flex-grow-1","flex-md-grow-0","text-nowrap",3,"onClick","disabled"],["icon","pi pi-times","label","Eliminar","severity","danger",1,"flex-grow-1","flex-md-grow-0","text-nowrap",3,"onClick","disabled"],[1,"row","py-3","justify-content-center","text-center"],["version","1.0","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 420 500","id","no-data-logo","width","150","height","150"],["transform","translate(0.000000,512.000000) scale(0.100000,-0.100000)","stroke","none"],["d","M2885 5114 c-220 -31 -373 -77 -528 -156 -407 -209 -693 -590 -784 -1045 -24 -123 -24 -413 0 -536 49 -244 180 -520 323 -680 19 -20 34 -40 34 -44 0 -4 -59 -67 -132 -140 l-131 -131 -39 26 c-47 30 -127 40 -184 22 -32 -10 -169 -142 -711 -683 -474 -473 -679 -685 -698 -719 -60 -110 -41 -234 49 -324 90 -90 214 -109 324 -49 34 19 246 224 719 698 541 542 673 679 683 711 18 57 8 137 -22 184 l-26 39 133 133 c124 123 135 132 153 119 10 -8 59 -45 108 -82 158 -120 380 -217 604 -264 118 -24 409 -24 533 0 607 121 1071 588 1183 1192 26 137 26 383 0 520 -111 597 -574 1069 -1162 1185 -104 21 -355 35 -429 24z m385 -149 c278 -54 496 -170 700 -375 206 -205 320 -419 376 -705 27 -134 24 -367 -5 -505 -74 -350 -283 -660 -573 -851 -114 -75 -157 -97 -278 -142 -159 -59 -280 -80 -465 -80 -182 0 -299 19 -458 77 -117 43 -169 69 -285 145 -295 194 -510 519 -578 871 -24 127 -24 361 0 485 35 183 107 360 211 515 57 85 200 238 278 298 198 153 434 251 679 282 98 12 294 5 398 -15z m-1653 -2728 c95 -95 95 -106 6 -198 l-67 -70 -103 103 -104 103 70 68 c92 90 102 89 198 -6z m-709 -915 c-443 -443 -560 -555 -591 -564 -99 -30 -201 65 -182 170 6 32 77 107 563 594 l557 558 102 -102 103 -103 -552 -553z"],["d","M2915 4833 c-130 -11 -309 -64 -438 -130 -60 -30 -160 -96 -188 -124 -25 -25 -24 -64 1 -89 28 -28 59 -25 106 9 254 187 592 251 899 170 369 -96 660 -387 754 -754 80 -310 17 -645 -170 -899 -34 -47 -37 -78 -9 -106 25 -25 64 -26 89 -1 53 53 129 185 181 315 75 189 96 456 51 664 -108 509 -520 882 -1040 942 -83 10 -153 10 -236 3z"],["d","M2102 4393 c-18 -7 -103 -135 -144 -218 -199 -399 -155 -890 113 -1245 347 -459 973 -608 1484 -352 90 45 211 126 219 147 11 30 6 55 -14 75 -27 27 -59 25 -101 -6 -354 -265 -852 -277 -1224 -29 -484 322 -614 983 -290 1470 30 46 55 93 55 104 0 42 -53 72 -98 54z"],["d","M2487 4042 c-33 -36 -22 -73 38 -132 l55 -54 -55 -56 c-63 -63 -73 -106 -33 -134 37 -26 60 -19 120 41 l57 57 60 -57 c65 -62 97 -71 131 -37 34 34 25 66 -37 131 l-57 60 53 51 c59 60 70 88 47 123 -12 18 -25 25 -49 25 -26 0 -43 -11 -87 -55 l-54 -54 -57 54 c-63 60 -102 71 -132 37z"],["d","M3186 4038 c-26 -37 -19 -60 41 -120 l57 -57 -57 -60 c-62 -65 -71 -97 -37 -131 34 -34 66 -25 130 36 l58 56 59 -56 c32 -31 67 -56 78 -56 36 0 65 28 65 63 0 26 -11 43 -55 87 l-55 54 55 56 c60 61 72 102 37 133 -34 31 -69 21 -131 -38 l-57 -54 -54 54 c-62 63 -106 74 -134 33z"],["d","M2923 3350 c-107 -20 -259 -97 -298 -153 -20 -29 -19 -70 3 -90 30 -27 70 -21 115 18 56 48 113 74 205 92 71 14 86 14 156 0 92 -19 147 -44 203 -92 65 -55 133 -40 133 29 0 53 -126 144 -250 180 -68 20 -199 28 -267 16z"]],template:function(e,l){if(e&1){let o=y();r(0,"div",4,0)(2,"div",5)(3,"div",6)(4,"h1",7)(5,"i",8),v("click",function(){return u(o),g(l.goHome())}),i(),s(6," Mis proyectos publicados "),i()(),r(7,"div",9)(8,"p-dataview",10,1),A(10,ge,3,2,"ng-template",null,2,C)(12,ve,15,0,"ng-template",null,3,C),i()()(),p(14,"p-confirmdialog")(15,"p-scrolltop",11),i()}e&2&&(n(8),m("value",l.proyects),n(7),m("threshold",100)("buttonProps",D(3,de)))},dependencies:[j,B,te,ee,J,Q,U,ie,Y,re,G,q,oe,W,$,ae,ne,F],styles:["@media (max-width: 575px){.main-container[_ngcontent-%COMP%]{padding-top:2vh!important}  .p-panel-content{padding:0!important}}#main[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto}#no-data-logo[_ngcontent-%COMP%]{fill:var(--p-dataview-content-color);width:max-content;height:max-content}.go-back-buttom[_ngcontent-%COMP%]{cursor:pointer}  .p-dataview-header{background-color:transparent;border-radius:.5rem .5rem 0 0}  .p-dataview-content{background-color:transparent;padding:1rem;border-radius:0 0 .5rem .5rem;max-height:100%}  .p-panel-header{background-color:transparent;padding:0}  .p-panel-content{padding:1rem 0 0}  p-panel{background-color:transparent;border:none}.image[_ngcontent-%COMP%]{height:8vw!important;width:8vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.card-image[_ngcontent-%COMP%]{height:12vw!important;width:12vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.card[_ngcontent-%COMP%]{min-width:max-content;border-color:var(--p-content-border-color)!important}.list[_ngcontent-%COMP%]{border-color:var(--p-content-border-color)!important}.main-container[_ngcontent-%COMP%]{padding:4vh;height:max-content}"]})};export{ce as OrgProyectList};
