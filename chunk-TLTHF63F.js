import{a as de,b as ge,d as ue}from"./chunk-LCUBCCJ2.js";import{b as fe}from"./chunk-THLGVQOA.js";import"./chunk-7NKSXQ2E.js";import{a as me,b as pe}from"./chunk-4RUQD4IH.js";import"./chunk-IUTEPSDB.js";import{a as _e}from"./chunk-CB6J6BBJ.js";import"./chunk-RSHBZTWH.js";import{a as ne,b as re}from"./chunk-AVGQIJ4R.js";import"./chunk-J7ZDMBSI.js";import"./chunk-PDTI4AWR.js";import{a as ee}from"./chunk-LK2RJHE2.js";import{a as se,b as ce}from"./chunk-7AHVG7ZA.js";import{b as le}from"./chunk-T4MU4AB4.js";import"./chunk-BOTTEXY6.js";import"./chunk-FQGKTMLL.js";import"./chunk-DTLGCBUS.js";import"./chunk-7QH3DEV4.js";import{a as oe}from"./chunk-TDFDGLCL.js";import{a as ae}from"./chunk-DW6VR7TT.js";import"./chunk-QD7ZASQF.js";import"./chunk-7QJ2EETJ.js";import"./chunk-EL5SIMWJ.js";import"./chunk-FKOEVO4B.js";import{a as K,b as Y}from"./chunk-M7F2YWVM.js";import{a as ie}from"./chunk-D5OLY3RM.js";import{C as $,D as J,b as Z,e as H,i as X,n as G}from"./chunk-CQCVERZP.js";import"./chunk-4G3JCKZK.js";import"./chunk-4O3FVBGX.js";import{D as te,b as W,j as B,l as U,v as q,x as Q}from"./chunk-QOJUQ6XD.js";import{$b as P,Db as N,Dc as T,Ec as x,Fb as D,Gb as F,Hb as u,Ib as n,Jb as r,Kb as f,Rb as w,Va as A,Wb as _,Xb as m,Za as s,a as b,ac as O,b as S,bc as M,ea as p,gc as E,ja as d,jb as k,jc as c,ka as g,kc as z,la as V,ma as I,mc as R,nc as y,oc as h,pb as C,pc as v,rc as j,zc as L}from"./chunk-A4JG42N6.js";var he=["dataView"],ve=["scrollContainer"],xe=()=>({severity:"contrast",raised:!0,rounded:!0});function we(o,t){o&1&&f(0,"i",26)}function be(o,t){if(o&1){let e=w();n(0,"p-panel",14),v("collapsedChange",function(i){d(e);let l=m();return h(l.collapsed,i)||(l.collapsed=i),g(i)}),C(1,we,1,0,"ng-template",null,5,x),n(3,"div",11)(4,"div",15)(5,"label",16),c(6,"Organizaci\xF3n"),r(),n(7,"p-select",17),v("ngModelChange",function(i){d(e);let l=m();return h(l.selectedOrganization,i)||(l.selectedOrganization=i),g(i)}),r()(),n(8,"div",15)(9,"label",18),c(10,"Estado"),r(),n(11,"p-select",19),v("ngModelChange",function(i){d(e);let l=m();return h(l.selectedState,i)||(l.selectedState=i),g(i)}),r()(),n(12,"div",15)(13,"label",20),c(14,"Nombre del proyecto"),r(),f(15,"br"),n(16,"input",21),v("ngModelChange",function(i){d(e);let l=m();return h(l.name,i)||(l.name=i),g(i)}),r()()(),n(17,"div",22)(18,"div",23)(19,"p-button",24),_("onClick",function(){d(e);let i=m();return g(i.filterData())}),r(),n(20,"p-button",25),_("onClick",function(){d(e);let i=m();return g(i.clearFilters())}),r()()()()}if(o&2){let e=m();u("toggleable",!0),y("collapsed",e.collapsed),s(7),u("options",e.organizations),y("ngModel",e.selectedOrganization),s(4),u("options",e.statesOptions),y("ngModel",e.selectedState),s(5),y("ngModel",e.name)}}function Se(o,t){if(o&1){let e=w();n(0,"div",28),_("click",function(){let i=d(e).$implicit,l=m(2);return g(l.goProyectDetail(i))}),n(1,"div",29),f(2,"img",30)(3,"p-tag",31),r(),n(4,"div",32)(5,"div",33)(6,"div")(7,"div",34),c(8),r(),n(9,"span",35),c(10),L(11,"currency"),L(12,"currency"),r(),f(13,"br"),n(14,"span",36),c(15),r()()(),n(16,"div",37),f(17,"div",38),r()()()}if(o&2){let e=t.$implicit,a=t.$index,i=m(2);E("mt-3",a!=0),s(2),u("src",e.imagenes[0]==null?null:e.imagenes[0].urlImagen,A)("alt",e.nombre),s(),u("value",e.estado.replace("_"," "))("severity",i.getSeverity(e)),s(5),z(e.nombre),s(2),R("( ",T(11,10,e.recaudado,"ARS","symbol","1.2-2")," / ",T(12,15,e.objetivo,"ARS","symbol","1.2-2")," )"),s(5),z(e.descripcion)}}function Ce(o,t){if(o&1&&(n(0,"div"),D(1,Se,18,20,"div",27,N),r()),o&2){let e=t.$implicit;E("p-3",!e),s(),F(e)}}function Pe(o,t){o&1&&(n(0,"div",39),V(),n(1,"svg",40)(2,"metadata"),c(3,"Created by potrace 1.10, written by Peter Selinger 2001-2011"),r(),n(4,"g",41),f(5,"path",42)(6,"path",43)(7,"path",44)(8,"path",45)(9,"path",46)(10,"path",47),r()(),I(),n(11,"h2"),c(12,"Sin resultados"),r(),n(13,"span"),c(14,"No se encontraron productos que coincidan con la b\xFAsqueda"),r()())}var ye=class o{dataView;scrollContainer;router=p(Q);route=p(q);toasts=p(te);loginService=p(ie);permissionsService=p(ae);userService=p(ee);proyectService=p(_e);location=p(W);logedUser;collapsed=!0;name;selectedState;proyects;filters={};organizations;selectedOrganization;statesOptions=[{name:"Activos",state:"ACTIVO"},{name:"Cancelados",state:"CANCELADO"},{name:"Objetivo logrado",state:"FINALIZADO_EXITOSO"},{name:"No alcanz\xF3 objetivo",state:"FINALIZADO_NO_EXITOSO"}];ngOnInit(){this.loginService.getLoggedUser().subscribe(t=>{if(this.logedUser=t,t==null){this.router.navigate(["/login"]);return}if(!this.permissionsService.canAccessRoute(t,this.router.url)){this.router.navigate(["/principal"]);return}}),this.route.queryParams.subscribe(t=>{this.name=t.nombre??null,t.organizacion&&(this.selectedOrganization=t.organizacion),t.estado&&(this.selectedState=t.estado),this.filterData()}),this.getOrganizations(),this.getProyects()}getProyects(){let t="";this.filters={},this.name&&(t+=`&nombre=${this.name}`,this.filters={nombre:this.name}),this.selectedOrganization&&(this.filters=S(b({},this.filters),{organizacion:this.selectedOrganization}),t+=`&organizacion=${this.selectedOrganization}`),this.selectedState&&(this.filters=S(b({},this.filters),{estado:this.selectedState}),t+=`&estado=${this.selectedState}`),t?this.location.replaceState(`/principal/proyectos?${t.replace("&","")}`):this.location.replaceState("/principal/proyectos"),this.proyectService.getProyects(this.selectedOrganization,this.selectedState,this.name).subscribe({next:e=>{this.proyects=e},error:()=>{this.toasts.showToast({severity:"error",summary:"Error al obtener proyectos",detail:"No pudimos obtener los proyectos publicados, intente nuevamente..."})}})}getOrganizations(){this.userService.getFilteredUsers(!0,"ORGANIZACION").subscribe({next:t=>{this.organizations=t},error:()=>{this.toasts.showToast({severity:"error",summary:"Error al obtener organizaciones",detail:"No pudimos listar las organizaciones, intente nuevamente..."})}})}goProyectDetail(t){this.router.navigate(["/principal/detalles-proyecto"],{state:{id:t.id,filters:this.filters}})}filterData(){this.proyects=[],document.activeElement?.blur(),this.collapsed=!0,this.getProyects()}clearFilters(){this.name=null,this.selectedOrganization=null,this.selectedState=null,this.filterData()}getSeverity(t){switch(t.estado){case"ACTIVO":return"success";case"CANCELADO":return"danger";case"FINALIZADO_EXITOSO":return"warn";case"FINALIZADO_NO_EXITOSO":return"danger";default:return"success"}}goHome(){this.router.navigate(["/principal"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=k({type:o,selectors:[["app-proyects-list"]],viewQuery:function(e,a){if(e&1&&(P(he,5),P(ve,5)),e&2){let i;O(i=M())&&(a.dataView=i.first),O(i=M())&&(a.scrollContainer=i.first)}},decls:17,vars:4,consts:[["scrollContainer",""],["dv",""],["header",""],["list",""],["emptymessage",""],["headericons",""],["id","main",1,"main-container","container-fluid"],[1,"col-auto","justify-content-center","align-content-center","h-100"],[1,"d-flex","row","mb-2"],[1,"d-flex","align-items-center","mb-0"],[1,"pi","pi-chevron-left","me-3","go-back-buttom",3,"click"],[1,"row"],["layout","list","toggleButtonProps","",3,"value"],["target","parent","icon","pi pi-arrow-up",3,"threshold","buttonProps"],["toggler","icon",3,"collapsedChange","toggleable","collapsed"],[1,"col-12","col-md-4","mt-4","mt-md-0"],["for","organization"],["name","organization","optionLabel","alias","optionValue","id","placeholder","Selecciona una organizaci\xF3n","fluid","",1,"mt-2",3,"ngModelChange","options","ngModel"],["for","state"],["name","state","optionLabel","name","optionValue","state","placeholder","Selecciona una organizaci\xF3n","fluid","",1,"mt-2",3,"ngModelChange","options","ngModel"],["for","name"],["fluid","","name","name","pInputText","","type","text","placeholder","Ej: Fondos para...",1,"mt-2",3,"ngModelChange","ngModel"],[1,"row","mt-4"],[1,"col-12","d-flex","justify-content-center","align-content-end","align-items-end"],["label","Aplicar filtros",1,"me-4",3,"onClick"],["label","Restaurar","severity","secondary",3,"onClick"],[1,"pi","pi-filter",2,"font-size","1rem"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list",3,"mt-3"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list",3,"click"],[1,"position-relative"],[1,"d-block","mx-auto","rounded","image",3,"src","alt"],[1,"position-absolute","bg-dark",2,"left","4px","top","4px",3,"value","severity"],[1,"d-flex","flex-column","flex-sm-row","justify-content-between","align-items-start","flex-grow-1","gap-4"],[1,"d-flex","flex-row","flex-md-column","justify-content-evenly","align-items-start","gap-2"],[1,"fw-medium","fs-5"],[1,"fw-medium","text-secondary","small"],[1,"fw-medium","small"],[1,"d-flex","flex-column","align-items-md-end","gap-3"],[1,"d-flex","flex-row-reverse","flex-md-row","gap-2"],[1,"row","py-3","justify-content-center","text-center"],["version","1.0","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 420 500","id","no-data-logo","width","150","height","150"],["transform","translate(0.000000,512.000000) scale(0.100000,-0.100000)","stroke","none"],["d","M2885 5114 c-220 -31 -373 -77 -528 -156 -407 -209 -693 -590 -784 -1045 -24 -123 -24 -413 0 -536 49 -244 180 -520 323 -680 19 -20 34 -40 34 -44 0 -4 -59 -67 -132 -140 l-131 -131 -39 26 c-47 30 -127 40 -184 22 -32 -10 -169 -142 -711 -683 -474 -473 -679 -685 -698 -719 -60 -110 -41 -234 49 -324 90 -90 214 -109 324 -49 34 19 246 224 719 698 541 542 673 679 683 711 18 57 8 137 -22 184 l-26 39 133 133 c124 123 135 132 153 119 10 -8 59 -45 108 -82 158 -120 380 -217 604 -264 118 -24 409 -24 533 0 607 121 1071 588 1183 1192 26 137 26 383 0 520 -111 597 -574 1069 -1162 1185 -104 21 -355 35 -429 24z m385 -149 c278 -54 496 -170 700 -375 206 -205 320 -419 376 -705 27 -134 24 -367 -5 -505 -74 -350 -283 -660 -573 -851 -114 -75 -157 -97 -278 -142 -159 -59 -280 -80 -465 -80 -182 0 -299 19 -458 77 -117 43 -169 69 -285 145 -295 194 -510 519 -578 871 -24 127 -24 361 0 485 35 183 107 360 211 515 57 85 200 238 278 298 198 153 434 251 679 282 98 12 294 5 398 -15z m-1653 -2728 c95 -95 95 -106 6 -198 l-67 -70 -103 103 -104 103 70 68 c92 90 102 89 198 -6z m-709 -915 c-443 -443 -560 -555 -591 -564 -99 -30 -201 65 -182 170 6 32 77 107 563 594 l557 558 102 -102 103 -103 -552 -553z"],["d","M2915 4833 c-130 -11 -309 -64 -438 -130 -60 -30 -160 -96 -188 -124 -25 -25 -24 -64 1 -89 28 -28 59 -25 106 9 254 187 592 251 899 170 369 -96 660 -387 754 -754 80 -310 17 -645 -170 -899 -34 -47 -37 -78 -9 -106 25 -25 64 -26 89 -1 53 53 129 185 181 315 75 189 96 456 51 664 -108 509 -520 882 -1040 942 -83 10 -153 10 -236 3z"],["d","M2102 4393 c-18 -7 -103 -135 -144 -218 -199 -399 -155 -890 113 -1245 347 -459 973 -608 1484 -352 90 45 211 126 219 147 11 30 6 55 -14 75 -27 27 -59 25 -101 -6 -354 -265 -852 -277 -1224 -29 -484 322 -614 983 -290 1470 30 46 55 93 55 104 0 42 -53 72 -98 54z"],["d","M2487 4042 c-33 -36 -22 -73 38 -132 l55 -54 -55 -56 c-63 -63 -73 -106 -33 -134 37 -26 60 -19 120 41 l57 57 60 -57 c65 -62 97 -71 131 -37 34 34 25 66 -37 131 l-57 60 53 51 c59 60 70 88 47 123 -12 18 -25 25 -49 25 -26 0 -43 -11 -87 -55 l-54 -54 -57 54 c-63 60 -102 71 -132 37z"],["d","M3186 4038 c-26 -37 -19 -60 41 -120 l57 -57 -57 -60 c-62 -65 -71 -97 -37 -131 34 -34 66 -25 130 36 l58 56 59 -56 c32 -31 67 -56 78 -56 36 0 65 28 65 63 0 26 -11 43 -55 87 l-55 54 55 56 c60 61 72 102 37 133 -34 31 -69 21 -131 -38 l-57 -54 -54 54 c-62 63 -106 74 -134 33z"],["d","M2923 3350 c-107 -20 -259 -97 -298 -153 -20 -29 -19 -70 3 -90 30 -27 70 -21 115 18 56 48 113 74 205 92 71 14 86 14 156 0 92 -19 147 -44 203 -92 65 -55 133 -40 133 29 0 53 -126 144 -250 180 -68 20 -199 28 -267 16z"]],template:function(e,a){if(e&1){let i=w();n(0,"div",6,0)(2,"div",7)(3,"div",8)(4,"h1",9)(5,"i",10),_("click",function(){return d(i),g(a.goHome())}),r(),c(6," Proyectos solidarios "),r()(),n(7,"div",11)(8,"p-dataview",12,1),C(10,be,21,7,"ng-template",null,2,x)(12,Ce,3,2,"ng-template",null,3,x)(14,Pe,15,0,"ng-template",null,4,x),r()()(),f(16,"p-scrolltop",13),r()}e&2&&(s(8),u("value",a.proyects),s(8),u("threshold",100)("buttonProps",j(3,xe)))},dependencies:[U,G,Z,H,X,pe,me,oe,J,$,ge,de,ce,se,ue,re,ne,fe,le,Y,K,B],styles:["@media (max-width: 575px){.main-container[_ngcontent-%COMP%]{padding-top:2vh!important}  .p-panel-content{padding:0!important}}#main[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto}#no-data-logo[_ngcontent-%COMP%]{fill:var(--p-dataview-content-color);width:max-content;height:max-content}.go-back-buttom[_ngcontent-%COMP%]{cursor:pointer}  .p-dataview-header{background-color:transparent;border-radius:.5rem .5rem 0 0}  .p-dataview-content{background-color:transparent;padding:1rem;border-radius:0 0 .5rem .5rem;max-height:100%}  .p-panel-header{background-color:transparent;padding:0}  .p-panel-content{padding:1rem 0 0}  p-panel{background-color:transparent;border:none}.image[_ngcontent-%COMP%]{height:8vw!important;width:8vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.card-image[_ngcontent-%COMP%]{height:12vw!important;width:12vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.card[_ngcontent-%COMP%]{min-width:max-content;border-color:var(--p-content-border-color)!important}.list[_ngcontent-%COMP%]{border-color:var(--p-content-border-color)!important}.main-container[_ngcontent-%COMP%]{padding:4vh;height:max-content}"]})};export{ye as ProyectsList};
