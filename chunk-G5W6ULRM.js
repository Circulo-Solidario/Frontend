import{b as ae,d as le}from"./chunk-LCUBCCJ2.js";import{b as ce}from"./chunk-THLGVQOA.js";import"./chunk-7NKSXQ2E.js";import{a as oe}from"./chunk-4RUQD4IH.js";import"./chunk-IUTEPSDB.js";import{a as se,b as de}from"./chunk-JQLK4AHE.js";import"./chunk-RSHBZTWH.js";import{a as Z,b as ee}from"./chunk-AVGQIJ4R.js";import"./chunk-J7ZDMBSI.js";import"./chunk-DVFEINU7.js";import{b as K}from"./chunk-OOHDZIPE.js";import"./chunk-PDTI4AWR.js";import{a as ne}from"./chunk-4FDTJGBB.js";import{b as re}from"./chunk-7AHVG7ZA.js";import"./chunk-BOTTEXY6.js";import"./chunk-FQGKTMLL.js";import"./chunk-DTLGCBUS.js";import"./chunk-7QH3DEV4.js";import{a as te}from"./chunk-TDFDGLCL.js";import{a as ie}from"./chunk-DW6VR7TT.js";import"./chunk-QD7ZASQF.js";import"./chunk-7QJ2EETJ.js";import"./chunk-EL5SIMWJ.js";import"./chunk-FKOEVO4B.js";import"./chunk-M7F2YWVM.js";import{a as Y}from"./chunk-D5OLY3RM.js";import{C as G,D as J,e as H,i as W,n as q}from"./chunk-CQCVERZP.js";import{ba as T}from"./chunk-4G3JCKZK.js";import"./chunk-4O3FVBGX.js";import{D as X,c as U,l as Q,x as A}from"./chunk-QOJUQ6XD.js";import{$b as L,Bb as V,Cb as B,Db as C,Ec as v,Fb as S,Gb as E,Hb as c,Ib as n,Jb as r,Kb as _,Rb as x,Va as y,Wb as f,Xb as d,Za as a,ac as M,bc as D,ea as p,gc as h,ja as u,jb as O,jc as m,ka as g,kc as w,la as k,ma as I,nc as R,oc as j,pb as P,pc as N,qc as F,rc as z,tc as $}from"./chunk-A4JG42N6.js";var pe=["dataView"],ue=["scrollContainer"],ge=()=>({severity:"contrast",raised:!0,rounded:!0}),_e=(i,t)=>({"pi-bars":i,"pi-table":t});function fe(i,t){if(i&1&&_(0,"i",16),i&2){let e=t.$implicit;c("ngClass",$(1,_e,e==="list",e==="grid"))}}function ve(i,t){if(i&1){let e=x();n(0,"div",14)(1,"p-selectbutton",15),N("ngModelChange",function(o){u(e);let s=d();return j(s.layout,o)||(s.layout=o),g(o)}),P(2,fe,1,4,"ng-template",null,5,v),r()()}if(i&2){let e=d();a(),R("ngModel",e.layout),c("options",e.options)("allowEmpty",!1)}}function xe(i,t){if(i&1){let e=x();n(0,"div",18)(1,"div",19),_(2,"img",20)(3,"p-tag",21),r(),n(4,"div",22)(5,"div",23)(6,"div")(7,"div",24),m(8),r(),n(9,"span",25),m(10),r()()(),n(11,"div",26)(12,"div",27)(13,"p-button",28),f("onClick",function(){let o=u(e).$implicit,s=d(2);return g(s.editProduct(o.id))}),r(),n(14,"p-button",29),f("onClick",function(o){let s=u(e).$implicit,b=d(2);return g(b.deleteProduct(o,s.id))}),r()()()()()}if(i&2){let e=t.$implicit,l=t.$index,o=d(2);h("mt-3",l!=0),a(2),c("src",e.urlImagen,y)("alt",e.nombre),a(),c("value",e.estado.replace("_"," "))("severity",o.getSeverity(e)),a(5),w(e.nombre),a(2),w(e.categoria.nombre),a(3),c("disabled",e.estado.replace("_"," ")!="DISPONIBLE"),a(),c("disabled",e.estado.replace("_"," ")!="DISPONIBLE")}}function we(i,t){if(i&1&&(n(0,"div"),S(1,xe,15,10,"div",17,C),r()),i&2){let e=t.$implicit;h("p-3",e),a(),E(e)}}function he(i,t){if(i&1){let e=x();n(0,"div",31)(1,"div",32)(2,"div",33),_(3,"img",34)(4,"p-tag",21),r()(),n(5,"div",35)(6,"div",36)(7,"div")(8,"div",37),m(9),r(),n(10,"span",25),m(11),r()()(),n(12,"div",38)(13,"div",39)(14,"p-button",40),f("onClick",function(){let o=u(e).$implicit,s=d(2);return g(s.editProduct(o.id))}),r(),n(15,"p-button",41),f("onClick",function(o){let s=u(e).$implicit,b=d(2);return g(b.deleteProduct(o,s.id))}),r()()()()()}if(i&2){let e=t.$implicit,l=d(2);a(3),c("src",e.urlImagen,y)("alt",e.nombre),a(),c("value",e.estado.replace("_"," "))("severity",l.getSeverity(e)),a(5),w(e.nombre),a(2),w(e.categoria.nombre),a(3),c("disabled",e.estado.replace("_"," ")!="DISPONIBLE"),a(),c("disabled",e.estado.replace("_"," ")!="DISPONIBLE")}}function be(i,t){if(i&1&&(n(0,"div",30),S(1,he,16,8,"div",31,C),r()),i&2){let e=t.$implicit;h("p-3",e),a(),E(e)}}function ye(i,t){i&1&&(n(0,"div",42),k(),n(1,"svg",43)(2,"metadata"),m(3,"Created by potrace 1.10, written by Peter Selinger 2001-2011"),r(),n(4,"g",44),_(5,"path",45)(6,"path",46)(7,"path",47)(8,"path",48)(9,"path",49)(10,"path",50),r()(),I(),n(11,"h2"),m(12,"No hay publicaciones"),r(),n(13,"span"),m(14,"No publicaste ning\xFAn producto todav\xEDa..."),r()())}function Pe(i,t){if(i&1&&V(0,ye,15,0,"div",42),i&2){let e=d();B(e.isLoading?-1:0)}}var me=class i{dataView;scrollContainer;router=p(A);loginService=p(Y);permissionsService=p(ie);productService=p(ne);toasts=p(X);confirmationService=p(T);logedUser;isLoading=!1;products;layout="grid";options=["list","grid"];ngOnInit(){this.loginService.getLoggedUser().subscribe(t=>{if(this.logedUser=t,!this.logedUser){this.router.navigate(["/login"]);return}if(!this.permissionsService.canAccessRoute(t,this.router.url)){this.router.navigate(["/principal"]);return}}),this.getProducts()}editProduct(t){this.router.navigate(["/principal/editar-publicacion"],{state:{id:t}})}deleteProduct(t,e){this.confirmationService.confirm({target:t.target,message:"Est\xE1s seguro de eliminar la publicaci\xF3n?",header:"Eliminiar publicaci\xF3n",closable:!0,closeOnEscape:!0,icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Eliminar"},accept:()=>{this.productService.deleteProduct(e).subscribe({next:()=>{this.toasts.showToast({severity:"success",summary:"Publicaci\xF3n eliminada",detail:"Se elimin\xF3 correctamente la publicaci\xF3n"}),this.getProducts()},error:()=>{this.toasts.showToast({severity:"error",summary:"Publicaci\xF3n no eliminada",detail:"Error al eliminar la publicaci\xF3n, intente nuevamente..."})}})},reject:()=>{}})}getProducts(){this.isLoading=!0,this.productService.getDonorsProducts(this.logedUser.id).subscribe({next:t=>{this.products=t,this.isLoading=!1},error:()=>{this.toasts.showToast({severity:"Error",summary:"Error al obtener productos",detail:"Error en el servidor, intente nuevamente"}),this.isLoading=!1}})}goHome(){this.router.navigate(["/principal"])}getSeverity(t){switch(t.estado){case"DISPONIBLE":return"success";case"SOLICITADO":return"warn";case"RESERVADO":return"danger";case"ENTREGADO":return"danger";default:return"success"}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-donor-product-list"]],viewQuery:function(e,l){if(e&1&&(L(pe,5),L(ue,5)),e&2){let o;M(o=D())&&(l.dataView=o.first),M(o=D())&&(l.scrollContainer=o.first)}},features:[F([T])],decls:19,vars:5,consts:[["dv",""],["header",""],["list",""],["grid",""],["emptymessage",""],["item",""],["id","main",1,"main-container","container-fluid"],[1,"col-auto","justify-content-center","align-content-center","h-100"],[1,"d-flex","row","mb-2"],[1,"d-flex","align-items-center","mb-0"],[1,"pi","pi-chevron-left","me-3","go-back-buttom",3,"click"],[1,"row"],["toggleButtonProps","",3,"value","layout"],["target","parent","icon","pi pi-arrow-up",3,"threshold","buttonProps"],[1,"d-flex","justify-content-between","align-items-center"],[3,"ngModelChange","ngModel","options","allowEmpty"],[1,"pi",3,"ngClass"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list",3,"mt-3"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list"],[1,"position-relative"],[1,"d-block","mx-auto","rounded","image",3,"src","alt"],[1,"position-absolute","bg-dark",2,"left","4px","top","4px",3,"value","severity"],[1,"d-flex","flex-column","flex-sm-row","justify-content-between","align-items-center","align-items-sm-start","flex-grow-1","gap-4"],[1,"d-flex","flex-row","flex-md-column","justify-content-evenly","align-items-start","gap-2"],[1,"fw-medium","fs-5","mt-2"],[1,"fw-medium","text-secondary","small"],[1,"d-flex","flex-column","align-items-md-end","gap-3"],[1,"d-flex","flex-row-reverse","flex-md-row","gap-2"],["icon","pi pi-pencil","label","Editar",1,"flex-grow-1","flex-md-grow-0","text-nowrap",3,"onClick","disabled"],["icon","pi pi-times","label","Eliminar","severity","danger",1,"flex-grow-1","flex-md-grow-0","text-nowrap",3,"onClick","disabled"],[1,"d-inline-flex","justify-content-center","row","row-cols-auto","g-3"],[1,"p-3","mx-2","border","rounded","col","card"],[1,"d-flex","justify-content-center","rounded","p-0"],[1,"position-relative","mx-auto"],[1,"rounded","card-image",3,"src","alt"],[1,"pt-2"],[1,"d-flex","flex-row","justify-content-between","align-items-start","gap-2"],[1,"fw-medium","fs-5","mt-1"],[1,"d-flex","flex-column","align-items-center","gap-3","mt-3"],[1,"d-flex","gap-2"],["icon","pi pi-pencil","label","",1,"flex-grow-1","text-nowrap",3,"onClick","disabled"],["icon","pi pi-times","label","","severity","danger",1,"flex-grow-1","text-nowrap",3,"onClick","disabled"],[1,"row","py-3","justify-content-center","text-center"],["version","1.0","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 420 500","id","no-data-logo","width","150","height","150"],["transform","translate(0.000000,512.000000) scale(0.100000,-0.100000)","stroke","none"],["d","M2885 5114 c-220 -31 -373 -77 -528 -156 -407 -209 -693 -590 -784 -1045 -24 -123 -24 -413 0 -536 49 -244 180 -520 323 -680 19 -20 34 -40 34 -44 0 -4 -59 -67 -132 -140 l-131 -131 -39 26 c-47 30 -127 40 -184 22 -32 -10 -169 -142 -711 -683 -474 -473 -679 -685 -698 -719 -60 -110 -41 -234 49 -324 90 -90 214 -109 324 -49 34 19 246 224 719 698 541 542 673 679 683 711 18 57 8 137 -22 184 l-26 39 133 133 c124 123 135 132 153 119 10 -8 59 -45 108 -82 158 -120 380 -217 604 -264 118 -24 409 -24 533 0 607 121 1071 588 1183 1192 26 137 26 383 0 520 -111 597 -574 1069 -1162 1185 -104 21 -355 35 -429 24z m385 -149 c278 -54 496 -170 700 -375 206 -205 320 -419 376 -705 27 -134 24 -367 -5 -505 -74 -350 -283 -660 -573 -851 -114 -75 -157 -97 -278 -142 -159 -59 -280 -80 -465 -80 -182 0 -299 19 -458 77 -117 43 -169 69 -285 145 -295 194 -510 519 -578 871 -24 127 -24 361 0 485 35 183 107 360 211 515 57 85 200 238 278 298 198 153 434 251 679 282 98 12 294 5 398 -15z m-1653 -2728 c95 -95 95 -106 6 -198 l-67 -70 -103 103 -104 103 70 68 c92 90 102 89 198 -6z m-709 -915 c-443 -443 -560 -555 -591 -564 -99 -30 -201 65 -182 170 6 32 77 107 563 594 l557 558 102 -102 103 -103 -552 -553z"],["d","M2915 4833 c-130 -11 -309 -64 -438 -130 -60 -30 -160 -96 -188 -124 -25 -25 -24 -64 1 -89 28 -28 59 -25 106 9 254 187 592 251 899 170 369 -96 660 -387 754 -754 80 -310 17 -645 -170 -899 -34 -47 -37 -78 -9 -106 25 -25 64 -26 89 -1 53 53 129 185 181 315 75 189 96 456 51 664 -108 509 -520 882 -1040 942 -83 10 -153 10 -236 3z"],["d","M2102 4393 c-18 -7 -103 -135 -144 -218 -199 -399 -155 -890 113 -1245 347 -459 973 -608 1484 -352 90 45 211 126 219 147 11 30 6 55 -14 75 -27 27 -59 25 -101 -6 -354 -265 -852 -277 -1224 -29 -484 322 -614 983 -290 1470 30 46 55 93 55 104 0 42 -53 72 -98 54z"],["d","M2487 4042 c-33 -36 -22 -73 38 -132 l55 -54 -55 -56 c-63 -63 -73 -106 -33 -134 37 -26 60 -19 120 41 l57 57 60 -57 c65 -62 97 -71 131 -37 34 34 25 66 -37 131 l-57 60 53 51 c59 60 70 88 47 123 -12 18 -25 25 -49 25 -26 0 -43 -11 -87 -55 l-54 -54 -57 54 c-63 60 -102 71 -132 37z"],["d","M3186 4038 c-26 -37 -19 -60 41 -120 l57 -57 -57 -60 c-62 -65 -71 -97 -37 -131 34 -34 66 -25 130 36 l58 56 59 -56 c32 -31 67 -56 78 -56 36 0 65 28 65 63 0 26 -11 43 -55 87 l-55 54 55 56 c60 61 72 102 37 133 -34 31 -69 21 -131 -38 l-57 -54 -54 54 c-62 63 -106 74 -134 33z"],["d","M2923 3350 c-107 -20 -259 -97 -298 -153 -20 -29 -19 -70 3 -90 30 -27 70 -21 115 18 56 48 113 74 205 92 71 14 86 14 156 0 92 -19 147 -44 203 -92 65 -55 133 -40 133 29 0 53 -126 144 -250 180 -68 20 -199 28 -267 16z"]],template:function(e,l){if(e&1){let o=x();n(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1",9)(4,"i",10),f("click",function(){return u(o),g(l.goHome())}),r(),m(5," Mis publicaciones "),r()(),n(6,"div",11)(7,"p-dataview",12,0),P(9,ve,4,3,"ng-template",null,1,v)(11,we,3,2,"ng-template",null,2,v)(13,be,3,2,"ng-template",null,3,v)(15,Pe,1,1,"ng-template",null,4,v),r()()(),_(17,"p-scrolltop",13)(18,"p-confirmdialog"),r()}e&2&&(a(7),c("value",l.products)("layout",l.layout),a(10),c("threshold",100)("buttonProps",z(4,ge)))},dependencies:[Q,U,q,H,W,oe,K,te,J,G,ae,re,le,ee,Z,ce,de,se],styles:["@media (max-width: 575px){.main-container[_ngcontent-%COMP%]{padding-top:2vh!important}}@media (max-width: 768px){.card[_ngcontent-%COMP%]{max-width:30vw!important;min-width:30vw!important}}#main[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto}#no-data-logo[_ngcontent-%COMP%]{fill:var(--p-dataview-content-color);width:max-content;height:max-content}.go-back-buttom[_ngcontent-%COMP%]{cursor:pointer}  .p-dataview-header{background-color:transparent;border-radius:.5rem .5rem 0 0}  .p-dataview-content{background-color:transparent;padding:1rem;border-radius:0 0 .5rem .5rem;max-height:100%}.image[_ngcontent-%COMP%]{height:8vw!important;width:8vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.card-image[_ngcontent-%COMP%]{height:12vw!important;width:12vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.card[_ngcontent-%COMP%]{max-width:14vw;min-width:14vw;border-color:var(--p-content-border-color)!important}.list[_ngcontent-%COMP%]{border-color:var(--p-content-border-color)!important}.main-container[_ngcontent-%COMP%]{padding:4vh;height:max-content}"]})};export{me as DonorProductList};
