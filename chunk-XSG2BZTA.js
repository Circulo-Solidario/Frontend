import{a as Te,b as Se,c as Be,d as Ne,e as Re,f as Le}from"./chunk-BDCNDM4M.js";import{a as Ee,b as Ve}from"./chunk-WNWYPXJT.js";import{a as xe,b as Fe}from"./chunk-3VIQTQ4Q.js";import{a as qe}from"./chunk-S6QTLLFU.js";import"./chunk-PSTD2D7J.js";import{a as Ae}from"./chunk-LK2RJHE2.js";import{a as Ie,b as Me}from"./chunk-BPTCD5M7.js";import{a as ye,b as ke}from"./chunk-3DND4RW6.js";import{a as Pe}from"./chunk-7QJ2EETJ.js";import"./chunk-FKOEVO4B.js";import{a as R,b as be}from"./chunk-M7F2YWVM.js";import{a as je}from"./chunk-D5OLY3RM.js";import{A as _e,B as ve,C as we,D as Ce,a as ie,b as ne,c as k,e as re,f as ae,g as oe,h as V,j as se,k as le,l as ue,n as de,o as ce,t as fe}from"./chunk-CQCVERZP.js";import{E as j,G as pe,ha as me,ia as N,la as he,pa as ge}from"./chunk-4G3JCKZK.js";import"./chunk-4O3FVBGX.js";import{D as De,e as X,f as Y,g as ee,l as B,n as q,x as te}from"./chunk-QOJUQ6XD.js";import{$ as K,$b as Z,Ab as M,Bb as _,Cb as v,Ec as E,Hb as p,Ib as u,Jb as l,Kb as m,Ob as W,Pb as H,Rb as y,Wb as w,Xb as g,Xc as b,Za as d,_ as U,_b as D,aa as G,ac as T,bc as S,ea as P,ic as F,ja as h,jb as I,jc as c,ka as f,kb as z,la as Q,nb as $,pb as C,qc as J,rb as x,za as A}from"./chunk-A4JG42N6.js";var Qe=["clearicon"],ze=["input"];function $e(r,s){if(r&1){let t=y();Q(),u(0,"svg",5),w("click",function(){h(t);let e=g(2);return f(e.clear())}),l()}if(r&2){let t=g(2);F(t.cx("clearIcon")),M("data-pc-section","clearIcon")}}function We(r,s){}function He(r,s){r&1&&C(0,We,0,0,"ng-template")}function Ze(r,s){if(r&1){let t=y();u(0,"span",6),w("click",function(){h(t);let e=g(2);return f(e.clear())}),C(1,He,1,0,null,7),l()}if(r&2){let t=g(2);F(t.cx("clearIcon")),M("data-pc-section","clearIcon"),d(),p("ngTemplateOutlet",t.clearIconTemplate||t._clearIconTemplate)}}function Je(r,s){if(r&1&&(W(0),C(1,$e,1,3,"svg",3)(2,Ze,2,4,"span",4),H()),r&2){let t=g();d(),p("ngIf",!t.clearIconTemplate&&!t._clearIconTemplate),d(),p("ngIf",t.clearIconTemplate||t._clearIconTemplate)}}var Xe=`
    /* For PrimeNG */
    p-inputmask {
        position: relative;
    }

    .p-inputmask-clear-icon {
        position: absolute;
        top: 50%;
        margin-top: -0.5rem;
        cursor: pointer;
        inset-inline-end: dt('form.field.padding.x');
        color: dt('form.field.icon.color');
    }

    p-inputMask:has(.p-inputtext-fluid),
    p-input-mask:has(.p-inputtext-fluid),
    p-inputmask:has(.p-inputtext-fluid) {
        width: 100%;
    }

    p-inputMask.ng-invalid.ng-dirty > .p-inputtext,
    p-input-mask.ng-invalid.ng-dirty > .p-inputtext,
    p-inputmask.ng-invalid.ng-dirty > .p-inputtext {
        border-color: dt('inputtext.invalid.border.color');
    }

    p-inputMask.ng-invalid.ng-dirty > .p-inputtext:enabled:focus,
    p-input-mask.ng-invalid.ng-dirty > .p-inputtext:enabled:focus,
    p-inputmask.ng-invalid.ng-dirty > .p-inputtext:enabled:focus {
        border-color: dt('inputtext.focus.border.color');
    }

    p-inputMask.ng-invalid.ng-dirty > .p-inputtext::placeholder,
    p-input-mask.ng-invalid.ng-dirty > .p-inputtext::placeholder,
    p-inputmask.ng-invalid.ng-dirty > .p-inputtext::placeholder {
        color: dt('inputtext.invalid.placeholder.color');
    }
`,Ye={root:({instance:r})=>["p-inputmask p-component p-inputwrapper",{"p-variant-filled":r.$variant()==="filled"}],clearIcon:"p-inputmask-clear-icon"},Oe=(()=>{class r extends he{name="inputmask";theme=Xe;classes=Ye;static \u0275fac=(()=>{let t;return function(e){return(t||(t=A(r)))(e||r)}})();static \u0275prov=K({token:r,factory:r.\u0275fac})}return r})();var et={provide:ie,useExisting:U(()=>L),multi:!0},L=(()=>{class r extends Pe{type="text";slotChar="_";autoClear=!0;showClear=!1;style;inputId;styleClass;placeholder;tabindex;title;ariaLabel;ariaLabelledBy;ariaRequired;readonly;unmask;characterPattern="[A-Za-z]";autofocus;autocomplete;keepBuffer=!1;get mask(){return this._mask}set mask(t){this._mask=t,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}onComplete=new x;onFocus=new x;onBlur=new x;onInput=new x;onKeydown=new x;onClear=new x;clearIconTemplate;templates;inputViewChild;value;_mask;input;defs;tests;partialPosition;firstNonMaskPos;lastRequiredNonMaskPos;len;oldVal;buffer;defaultBuffer;focusText;caretTimeoutId;androidChrome=!0;focused;_componentStyle=P(Oe);ngOnInit(){if(super.ngOnInit(),q(this.platformId)){let t=navigator.userAgent;this.androidChrome=/chrome/i.test(t)&&/android/i.test(t)}this.initMask()}_clearIconTemplate;ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"clearicon":this._clearIconTemplate=t.template;break}})}initMask(){if(!this.mask)return;this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let t=this.mask.split("");for(let i=0;i<t.length;i++){let e=t[i];e=="?"?(this.len--,this.partialPosition=i):this.defs[e]?(this.tests.push(new RegExp(this.defs[e])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<t.length;i++){let e=t[i];e!="?"&&(this.defs[e]?this.buffer.push(this.getPlaceholder(i)):this.buffer.push(e))}this.defaultBuffer=this.buffer.join("")}caret(t,i){let e,n,a;if(!(!this.inputViewChild?.nativeElement.offsetParent||this.inputViewChild.nativeElement!==this.inputViewChild.nativeElement.ownerDocument.activeElement))if(typeof t=="number")n=t,a=typeof i=="number"?i:n,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(n,a):this.inputViewChild.nativeElement.createTextRange&&(e=this.inputViewChild.nativeElement.createTextRange(),e.collapse(!0),e.moveEnd("character",a),e.moveStart("character",n),e.select());else return this.inputViewChild.nativeElement.setSelectionRange?(n=this.inputViewChild.nativeElement.selectionStart,a=this.inputViewChild.nativeElement.selectionEnd):this.document&&this.document.selection.createRange&&(e=this.document.createRange(),n=0-e.duplicate().moveStart("character",-1e5),a=n+e.text.length),{begin:n,end:a}}isCompleted(){let t;for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(t){return t<this.slotChar.length?this.slotChar.charAt(t):this.slotChar.charAt(0)}seekNext(t){for(;++t<this.len&&!this.tests[t];);return t}seekPrev(t){for(;--t>=0&&!this.tests[t];);return t}shiftL(t,i){let e,n;if(!(t<0)){for(e=t,n=this.seekNext(i);e<this.len;e++)if(this.tests[e]){if(n<this.len&&this.tests[e].test(this.buffer[n]))this.buffer[e]=this.buffer[n],this.buffer[n]=this.getPlaceholder(n);else break;n=this.seekNext(n)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}}shiftR(t){let i,e,n,a;for(i=t,e=this.getPlaceholder(t);i<this.len;i++)if(this.tests[i])if(n=this.seekNext(i),a=this.buffer[i],this.buffer[i]=e,n<this.len&&this.tests[n].test(a))e=a;else break}handleAndroidInput(t){var i=this.inputViewChild?.nativeElement.value,e=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);e.begin>0&&!this.tests[e.begin-1];)e.begin--;if(e.begin===0)for(;e.begin<this.firstNonMaskPos&&!this.tests[e.begin];)e.begin++;setTimeout(()=>{this.caret(e.begin,e.begin),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);e.begin<this.len&&!this.tests[e.begin];)e.begin++;setTimeout(()=>{this.caret(e.begin,e.begin),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(t){if(this.focused=!1,this.onModelTouched(),this.keepBuffer||this.checkVal(),this.onBlur.emit(t),this.modelValue()!=this.focusText||this.modelValue()!=this.value){this.updateModel(t);let i=this.document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild?.nativeElement.dispatchEvent(i)}}onInputKeydown(t){if(this.readonly)return;let i=t.which||t.keyCode,e,n,a,o;q(this.platformId)&&(o=/iphone/i.test(j())),this.oldVal=this.inputViewChild?.nativeElement.value,this.onKeydown.emit(t),i===8||i===46||o&&i===127?(e=this.caret(),n=e.begin,a=e.end,a-n===0&&(n=i!==46?this.seekPrev(n):a=this.seekNext(n-1),a=i===46?this.seekNext(a):a),this.clearBuffer(n,a),this.keepBuffer?this.shiftL(n,a-2):this.shiftL(n,a-1),this.updateModel(t),this.onInput.emit(t),t.preventDefault()):i===13?(this.onInputBlur(t),this.updateModel(t)):i===27&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(t),t.preventDefault())}onKeyPress(t){if(!this.readonly){var i=t.which||t.keyCode,e=this.caret(),n,a,o,O;t.ctrlKey||t.altKey||t.metaKey||i<32||i>34&&i<41||(i&&i!==13&&(e.end-e.begin!==0&&(this.clearBuffer(e.begin,e.end),this.shiftL(e.begin,e.end-1)),n=this.seekNext(e.begin-1),n<this.len&&(a=String.fromCharCode(i),this.tests[n].test(a)&&(this.shiftR(n),this.buffer[n]=a,this.writeBuffer(),o=this.seekNext(n),pe()&&/android/i.test(j())?setTimeout(()=>{this.caret(o)},0):this.caret(o),e.begin<=this.lastRequiredNonMaskPos&&(O=this.isCompleted()),this.onInput.emit(t))),t.preventDefault()),this.updateModel(t),O&&this.onComplete.emit())}}clearBuffer(t,i){if(!this.keepBuffer){let e;for(e=t;e<i&&e<this.len;e++)this.tests[e]&&(this.buffer[e]=this.getPlaceholder(e))}}writeBuffer(){this.buffer&&this.inputViewChild?.nativeElement&&(this.inputViewChild.nativeElement.value=this.buffer.join(""))}checkVal(t){let i=this.inputViewChild?.nativeElement.value,e=-1,n,a,o;for(n=0,o=0;n<this.len;n++)if(this.tests[n]){for(this.buffer[n]=this.getPlaceholder(n);o++<i.length;)if(a=i.charAt(o-1),this.tests[n].test(a)){this.keepBuffer||(this.buffer[n]=a),e=n;break}if(o>i.length){this.clearBuffer(n+1,this.len);break}}else this.buffer[n]===i.charAt(o)&&o++,n<this.partialPosition&&(e=n);return t?this.writeBuffer():e+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild?.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild?.nativeElement.value.substring(0,e+1)),this.partialPosition?n:this.firstNonMaskPos}onInputFocus(t){if(this.readonly)return;this.focused=!0,clearTimeout(this.caretTimeoutId);let i;this.focusText=this.inputViewChild?.nativeElement.value,i=this.keepBuffer?this.inputViewChild?.nativeElement.value.length:this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild?.nativeElement===this.inputViewChild?.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask?.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(t)}onInputChange(t){this.androidChrome?this.handleAndroidInput(t):this.handleInputChange(t),this.onInput.emit(t)}handleInputChange(t){this.readonly||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let t=[];for(let i=0;i<this.buffer.length;i++){let e=this.buffer[i];this.tests[i]&&e!=this.getPlaceholder(i)&&t.push(e)}return t.join("")}updateModel(t){let i=t.target;if(!i)return;let e=this.unmask?this.getUnmaskedValue():i.value;e!=null&&(this.value=e,this.writeModelValue(this.value),this.onModelChange(this.value))}focus(){this.inputViewChild?.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}writeControlValue(t,i){this.value=t,i(this.value),this.inputViewChild&&this.inputViewChild.nativeElement&&(this.value==null||this.value==null?this.inputViewChild.nativeElement.value="":this.inputViewChild.nativeElement.value=this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value)}static \u0275fac=(()=>{let t;return function(e){return(t||(t=A(r)))(e||r)}})();static \u0275cmp=I({type:r,selectors:[["p-inputmask"],["p-inputMask"],["p-input-mask"]],contentQueries:function(i,e,n){if(i&1&&(D(n,Qe,4),D(n,me,4)),i&2){let a;T(a=S())&&(e.clearIconTemplate=a.first),T(a=S())&&(e.templates=a)}},viewQuery:function(i,e){if(i&1&&Z(ze,7),i&2){let n;T(n=S())&&(e.inputViewChild=n.first)}},hostVars:2,hostBindings:function(i,e){i&2&&F(e.cx("root"))},inputs:{type:"type",slotChar:"slotChar",autoClear:[2,"autoClear","autoClear",b],showClear:[2,"showClear","showClear",b],style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",ariaRequired:[2,"ariaRequired","ariaRequired",b],readonly:[2,"readonly","readonly",b],unmask:[2,"unmask","unmask",b],characterPattern:"characterPattern",autofocus:[2,"autofocus","autofocus",b],autocomplete:"autocomplete",keepBuffer:[2,"keepBuffer","keepBuffer",b],mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},features:[J([et,Oe]),$],decls:3,vars:27,consts:[["input",""],["pInputText","",3,"focus","blur","keydown","keypress","input","paste","invalid","ngStyle","pSize","variant","pAutoFocus","fluid"],[4,"ngIf"],["data-p-icon","times",3,"class","click",4,"ngIf"],[3,"class","click",4,"ngIf"],["data-p-icon","times",3,"click"],[3,"click"],[4,"ngTemplateOutlet"]],template:function(i,e){if(i&1){let n=y();u(0,"input",1,0),w("focus",function(o){return h(n),f(e.onInputFocus(o))})("blur",function(o){return h(n),f(e.onInputBlur(o))})("keydown",function(o){return h(n),f(e.onInputKeydown(o))})("keypress",function(o){return h(n),f(e.onKeyPress(o))})("input",function(o){return h(n),f(e.onInputChange(o))})("paste",function(o){return h(n),f(e.handleInputChange(o))}),l(),C(2,Je,3,2,"ng-container",2)}i&2&&(F(e.styleClass),p("invalid",e.invalid())("ngStyle",e.style)("pSize",e.size())("variant",e.$variant())("pAutoFocus",e.autofocus)("fluid",e.hasFluid),M("id",e.inputId)("type",e.type)("name",e.name())("placeholder",e.placeholder)("title",e.title)("size",e.inputSize())("autocomplete",e.autocomplete)("maxlength",e.maxlength())("minlength",e.minlength())("tabindex",e.tabindex)("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy)("aria-required",e.ariaRequired)("required",e.required()?"":void 0)("readonly",e.readonly?"":void 0)("disabled",e.$disabled()?"":void 0)("data-pc-name","inputmask")("data-pc-section","root"),d(2),p("ngIf",e.value!=null&&e.$filled()&&e.showClear&&!e.$disabled()))},dependencies:[B,X,ee,Y,R,fe,ge,N],encapsulation:2,changeDetection:0})}return r})(),Ue=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=z({type:r});static \u0275inj=G({imports:[L,N,N]})}return r})();function it(r,s){r&1&&(u(0,"p-message",23),c(1," Mail inv\xE1lido. "),l())}function nt(r,s){r&1&&(u(0,"p-message",23),c(1," Ingrese un correo v\xE1lido. "),l())}function rt(r,s){r&1&&m(0,"i",26)}function at(r,s){if(r&1){let t=y();u(0,"div",17)(1,"div",18)(2,"p",19),c(3,"Ingresa tu correo para enviar el c\xF3digo de recuperaci\xF3n."),l()(),u(4,"form",20)(5,"div",18)(6,"label",21),c(7,"Correo electr\xF3nico"),l(),m(8,"input",22),_(9,it,2,0,"p-message",23),_(10,nt,2,0,"p-message",23),l()()(),u(11,"div",24)(12,"p-button",25),w("onClick",function(){h(t);let e=g();return f(e.sendRecoveryCode())}),c(13," Enviar c\xF3digo de recuperaci\xF3n "),_(14,rt,1,0,"i",26),l()()}if(r&2){let t,i,e=g();d(4),p("formGroup",e.recoveryPasswordForm),d(5),v(!e.vaildEmail&&!((t=e.recoveryPasswordForm.get("email"))!=null&&t.dirty)?9:-1),d(),v((i=e.recoveryPasswordForm.get("email"))!=null&&i.invalid&&((i=e.recoveryPasswordForm.get("email"))!=null&&i.dirty)?10:-1),d(2),p("disabled",e.loading),d(2),v(e.loading?14:-1)}}function ot(r,s){r&1&&(u(0,"p-message",23),c(1," El c\xF3digo ingresado es incorrecto. "),l())}function st(r,s){r&1&&m(0,"i",26)}function lt(r,s){if(r&1){let t=y();u(0,"div",17)(1,"div",18)(2,"p",19),c(3,"Ingresa el c\xF3digo de verificaci\xF3n enviado a tu casilla de correo."),l()(),u(4,"form",20)(5,"div",18)(6,"label",27),c(7,"C\xF3digo"),l(),m(8,"p-inputmask",28),_(9,ot,2,0,"p-message",23),l()()(),u(10,"div",29)(11,"p-button",30),w("onClick",function(){let e=h(t).activateCallback,n=g();return e(1),f(n.step=1)}),l(),u(12,"p-button",25),w("onClick",function(){h(t);let e=g();return f(e.verifyCode())}),c(13," Validar c\xF3digo "),_(14,st,1,0,"i",26),l()()}if(r&2){let t,i=g();d(4),p("formGroup",i.recoveryPasswordForm),d(5),v(i.invalidCode&&!((t=i.recoveryPasswordForm.get("codigo"))!=null&&t.dirty)?9:-1),d(3),p("disabled",i.loading),d(2),v(i.loading?14:-1)}}function ut(r,s){r&1&&m(0,"i",38)}function dt(r,s){r&1&&m(0,"i",39)}function ct(r,s){r&1&&m(0,"i",38)}function pt(r,s){r&1&&m(0,"i",39)}function mt(r,s){r&1&&m(0,"i",38)}function ht(r,s){r&1&&m(0,"i",39)}function ft(r,s){r&1&&m(0,"i",38)}function gt(r,s){r&1&&m(0,"i",39)}function _t(r,s){if(r&1&&(m(0,"p-divider"),u(1,"ul",36)(2,"li",37),_(3,ut,1,0,"i",38)(4,dt,1,0,"i",39),c(5," M\xEDnimo 8 caracteres "),l(),u(6,"li",37),_(7,ct,1,0,"i",38)(8,pt,1,0,"i",39),c(9," S\xEDmbolos (ej. !@#$) "),l(),u(10,"li",37),_(11,mt,1,0,"i",38)(12,ht,1,0,"i",39),c(13," Al menos una may\xFAscula "),l(),u(14,"li",37),_(15,ft,1,0,"i",38)(16,gt,1,0,"i",39),c(17," N\xFAmeros "),l()()),r&2){let t,i,e,n,a=g(2);d(3),v((t=a.recoveryPasswordForm.get("contrasena"))!=null&&t.getError("minlength")||(t=a.recoveryPasswordForm.get("contrasena"))!=null&&t.getError("required")?3:4),d(4),v((i=a.recoveryPasswordForm.get("contrasena"))!=null&&i.getError("missingSpecialChar")||(i=a.recoveryPasswordForm.get("contrasena"))!=null&&i.getError("required")?7:8),d(4),v((e=a.recoveryPasswordForm.get("contrasena"))!=null&&e.getError("missingUpperCase")||(e=a.recoveryPasswordForm.get("contrasena"))!=null&&e.getError("required")?11:12),d(4),v((n=a.recoveryPasswordForm.get("contrasena"))!=null&&n.getError("missingNumber")||(n=a.recoveryPasswordForm.get("contrasena"))!=null&&n.getError("required")?15:16)}}function vt(r,s){r&1&&(u(0,"p-message",23),c(1,"Ingrese una contrase\xF1a v\xE1lida."),l())}function wt(r,s){r&1&&(u(0,"p-message",23),c(1,"Las contrase\xF1as no coinciden."),l())}function Ct(r,s){r&1&&m(0,"i",26)}function yt(r,s){if(r&1){let t=y();u(0,"div",17)(1,"div",18)(2,"p",19),c(3,"Ingresa tu nueva contrase\xF1a."),l()(),u(4,"form",20)(5,"div",18)(6,"label",31),c(7,"Contrase\xF1a"),l(),u(8,"p-password",32),C(9,_t,18,4,"ng-template",null,1,E),l(),_(11,vt,2,0,"p-message",23),l(),u(12,"div",18)(13,"label",33),c(14,"Confirmar contrase\xF1a"),l(),m(15,"p-password",34),_(16,wt,2,0,"p-message",23),l()()(),u(17,"div",29)(18,"p-button",35),w("onClick",function(){let e=h(t).activateCallback,n=g();return e(2),f(n.step=2)}),l(),u(19,"p-button",25),w("onClick",function(){h(t);let e=g();return f(e.changePassword())}),c(20," Cambiar contrase\xF1a "),_(21,Ct,1,0,"i",26),l()()}if(r&2){let t,i,e,n,a,o=g();d(4),p("formGroup",o.recoveryPasswordForm),d(4),p("feedback",!0)("toggleMask",!0)("invalid",((t=o.recoveryPasswordForm.get("contrasena"))==null?null:t.invalid)&&((t=o.recoveryPasswordForm.get("contrasena"))==null?null:t.touched)&&((t=o.recoveryPasswordForm.get("contrasena"))==null?null:t.dirty)),d(3),v((i=o.recoveryPasswordForm.get("contrasena"))!=null&&i.invalid&&((i=o.recoveryPasswordForm.get("contrasena"))!=null&&i.touched)&&((i=o.recoveryPasswordForm.get("contrasena"))!=null&&i.dirty)?11:-1),d(4),p("feedback",!1)("toggleMask",!0)("invalid",((e=o.recoveryPasswordForm.get("confirmPassword"))==null?null:e.invalid)&&((e=o.recoveryPasswordForm.get("contrasena"))==null?null:e.valid)&&((e=o.recoveryPasswordForm.get("confirmPassword"))==null?null:e.touched)&&((e=o.recoveryPasswordForm.get("confirmPassword"))==null?null:e.dirty))("disabled",((n=o.recoveryPasswordForm.get("contrasena"))==null?null:n.invalid)??!0),d(),v((a=o.recoveryPasswordForm.get("confirmPassword"))!=null&&a.invalid&&((a=o.recoveryPasswordForm.get("contrasena"))!=null&&a.valid)&&((a=o.recoveryPasswordForm.get("confirmPassword"))!=null&&a.touched)&&((a=o.recoveryPasswordForm.get("confirmPassword"))!=null&&a.dirty)?16:-1),d(3),p("disabled",o.loading),d(2),v(o.loading?21:-1)}}var Ke=class r{userService=P(Ae);loginService=P(je);router=P(te);toastService=P(De);recoveryPasswordForm;userId;loggedUser;vaildEmail=!0;loading=!1;invalidCode=!1;step=1;constructor(){this.recoveryPasswordForm=new oe({email:new V("",[k.email,k.required]),codigo:new V("",[k.minLength(10),k.maxLength(10)]),contrasena:new V("",[k.minLength(8),k.maxLength(25),this.passwordStrengthValidator(),k.required]),confirmPassword:new V("",[k.required,this.passWordMatchesValidaor()])})}ngOnInit(){this.loginService.getLoggedUser().subscribe(s=>{this.loggedUser=s}),this.loggedUser!=null&&this.router.navigate(["/principal"]),this.userId=null}goBack(){this.router.navigate(["/login"])}sendRecoveryCode(){if(this.userId=null,!this.recoveryPasswordForm?.get("email")?.value){this.recoveryPasswordForm?.get("email")?.markAsDirty();return}this.loading=!0,this.userService.forgotPassword(this.recoveryPasswordForm?.get("email")?.value).subscribe({next:()=>{this.loading=!1,this.step=2},error:s=>{this.loading=!1,s.status===400?(this.recoveryPasswordForm?.get("email")?.markAsPristine(),this.vaildEmail=!1,this.toastService.showToast({severity:"error",summary:"Mail err\xF3neo",detail:s.error.message})):this.toastService.showToast({severity:"error",summary:"Error del servidor",detail:"Ocurri\xF3 un error. Intenta m\xE1s tarde."})}})}verifyCode(){if(!this.recoveryPasswordForm?.get("codigo")?.value){this.recoveryPasswordForm?.get("codigo")?.markAsDirty();return}this.loading=!0,this.userService.validateCodeFP(this.recoveryPasswordForm?.get("email")?.value,this.recoveryPasswordForm?.get("codigo")?.value).subscribe({next:s=>{s.usuarioId!=null?(this.userId=s.usuarioId,this.step=3,this.loading=!1):(this.recoveryPasswordForm?.get("codigo")?.markAsPristine(),this.invalidCode=!0,this.loading=!1)},error:()=>{this.loading=!1,this.toastService.showToast({severity:"error",summary:"Error del servidor",detail:"Ocurri\xF3 un error. Intenta m\xE1s tarde."})}})}changePassword(){this.recoveryPasswordForm?.get("contrasena")?.invalid||this.recoveryPasswordForm?.get("codigo")?.invalid||(this.loading=!0,this.userService.changePassword(this.userId,this.recoveryPasswordForm?.get("contrasena")?.value).subscribe({next:()=>{this.loading=!1,this.toastService.showToast({severity:"success",summary:"Contrase\xF1a cambiada",detail:"Tu contrase\xF1a ha sido actualizada correctamente."}),this.router.navigate(["/login"])},error:()=>{this.loading=!1,this.toastService.showToast({severity:"error",summary:"Error del servidor",detail:"Ocurri\xF3 un error. Intenta nuevamente."})}}))}passWordMatchesValidaor(){return s=>{if(!s.value||!this.recoveryPasswordForm?.get("contrasena")?.value)return null;let t=this.recoveryPasswordForm?.get("contrasena")?.value,i=s.value;return t===i?null:{passwordMismatch:!0}}}passwordStrengthValidator(){return s=>{if(!s.value)return null;let t=/[A-Z]/.test(s.value),i=/[a-z]/.test(s.value),e=/\d/.test(s.value),n=/[!@#$%^&*(),.?":{}|<>]/.test(s.value),a={};return t||(a.missingUpperCase=!0),i||(a.missingLowerCase=!0),e||(a.missingNumber=!0),n||(a.missingSpecialChar=!0),Object.keys(a).length>0?a:null}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=I({type:r,selectors:[["app-forgot-password"]],decls:33,vars:8,consts:[["content",""],["footer",""],[1,"row","me-0","justify-content-between","align-items-center"],[1,"col-auto"],["link","",3,"onClick"],["pButtonIcon","",1,"pi","pi-angle-left"],["pButtonLabel",""],["id","screenWidth",1,"col","position-absolute","top-50","start-50","translate-middle"],[1,"container-fluid","align-items-center","justify-content-center"],["id","card",1,"col-lg-auto","m-auto"],["fluid","",1,"shadow-lg","px-4","flex"],[1,"text-center","mb-4","mt-4"],[1,"fw-bold","m-0"],[1,"text-sm","m-0","mt-1"],[1,"justify-content-center","align-items-center"],[3,"value","linear"],[3,"value"],[1,"d-flex","flex-column"],[1,"mb-4"],[1,"text-sm","m-0"],[1,"me-2","mb-0","mt-2",3,"formGroup"],["for","correo",1,"form-label"],["id","correo","pInputText","","placeholder","tu-correo@ejemplo.com","type","email","formControlName","email",1,"w-100","mt-1"],["severity","error","size","small","variant","simple"],[1,"d-flex","pt-6","justify-content-end"],["styleClass","w-100",3,"onClick","disabled"],[1,"pi","pi-spin","pi-spinner"],["for","codigo",1,"form-label"],["name","codigo","styleClass","mt-1","mask","**********","formControlName","codigo","fluid",""],[1,"d-flex","pt-6","justify-content-between"],["label","","severity","secondary","icon","pi pi-arrow-left",3,"onClick"],["for","contrasena",1,"form-label"],["id","contrasena","formControlName","contrasena","placeholder","Crea una contrase\xF1a","weakLabel","Muy simple","mediumLabel","Medianamente segura","strongLabel","Compleja","promptLabel","Ingrese una contrase\xF1a","fluid","","appendTo","body",1,"mt-1",3,"feedback","toggleMask","invalid"],["for","confirm-password",1,"form-label"],["id","confirm-password","formControlName","confirmPassword","placeholder","Confirma tu contrase\xF1a","fluid","",1,"mt-1",3,"feedback","toggleMask","invalid","disabled"],["label","","severity","secondary","icon","pi pi-arrow-left","iconPos","right",3,"onClick"],[1,"ms-2","p-0","leading-normal",2,"list-style","none"],[1,"flex","items-center"],[1,"pi","pi-times-circle","me-1",2,"color","red"],[1,"pi","pi-check-circle","me-1",2,"color","green"]],template:function(t,i){if(t&1){let e=y();u(0,"div",2)(1,"div",3)(2,"p-button",4),w("onClick",function(){return h(e),f(i.goBack())}),m(3,"i",5),u(4,"span",6),c(5,"Volver atr\xE1s"),l()()(),u(6,"div",3),m(7,"app-theme-switcher"),l()(),u(8,"div",7)(9,"div",8)(10,"div",9)(11,"p-card",10)(12,"div",11)(13,"h1",12),c(14,"Recuperar contrase\xF1a"),l(),u(15,"p",13),c(16,"Recupera tu contrase\xF1a con el mail de tu usuario"),l()(),u(17,"div",14)(18,"p-stepper",15)(19,"p-step-list"),m(20,"p-step",16)(21,"p-step",16)(22,"p-step",16),l(),u(23,"p-step-panels")(24,"p-step-panel",16),C(25,at,15,5,"ng-template",null,0,E),l(),u(27,"p-step-panel",16),C(28,lt,15,4,"ng-template",null,0,E),l(),u(30,"p-step-panel",16),C(31,yt,22,12,"ng-template",null,0,E),l()()()()()()()()}t&2&&(d(18),p("value",i.step)("linear",!0),d(2),p("value",1),d(),p("value",2),d(),p("value",3),d(2),p("value",1),d(3),p("value",2),d(3),p("value",3))},dependencies:[qe,Ce,we,_e,ve,ke,ye,Fe,xe,Me,Ie,de,se,ne,re,ae,B,be,R,ce,le,ue,Le,Re,Te,Ne,Be,Se,Ue,L,Ve,Ee],encapsulation:2})};export{Ke as ForgotPassword};
