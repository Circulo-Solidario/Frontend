import{b as re,d as oe}from"./chunk-LCUBCCJ2.js";import{b as ae}from"./chunk-THLGVQOA.js";import"./chunk-7NKSXQ2E.js";import{a as ie,b as ne}from"./chunk-4RUQD4IH.js";import"./chunk-IUTEPSDB.js";import{a as se,b as le}from"./chunk-JQLK4AHE.js";import"./chunk-RSHBZTWH.js";import{a as J,b as K}from"./chunk-AVGQIJ4R.js";import"./chunk-J7ZDMBSI.js";import"./chunk-DVFEINU7.js";import"./chunk-PDTI4AWR.js";import{a as Q}from"./chunk-LK2RJHE2.js";import{b as te}from"./chunk-7AHVG7ZA.js";import{b as ee}from"./chunk-T4MU4AB4.js";import"./chunk-BOTTEXY6.js";import"./chunk-FQGKTMLL.js";import"./chunk-DTLGCBUS.js";import"./chunk-7QH3DEV4.js";import{a as W,b as X}from"./chunk-TDFDGLCL.js";import{a as Y}from"./chunk-DW6VR7TT.js";import"./chunk-QD7ZASQF.js";import{a as H,b as $}from"./chunk-3DND4RW6.js";import"./chunk-7QJ2EETJ.js";import"./chunk-EL5SIMWJ.js";import"./chunk-FKOEVO4B.js";import{b as Z}from"./chunk-M7F2YWVM.js";import{a as G}from"./chunk-D5OLY3RM.js";import{C as B,D as F,n as N}from"./chunk-CQCVERZP.js";import{ba as O}from"./chunk-4G3JCKZK.js";import"./chunk-4O3FVBGX.js";import{D as q,l as A,x as j}from"./chunk-QOJUQ6XD.js";import{$b as y,Bb as w,Cb as b,Db as k,Ec as z,Fb as L,Gb as R,Hb as p,Ib as o,Jb as r,Kb as u,Rb as x,Va as I,Wb as _,Xb as c,Za as s,ac as C,bc as E,ea as g,gc as S,ja as v,jb as M,jc as d,ka as f,kc as h,la as T,ma as D,pb as U,qc as V,rc as P}from"./chunk-A4JG42N6.js";var de=["dataView"],me=["scrollContainer"],pe=()=>({severity:"contrast",raised:!0,rounded:!0});function ue(a,t){if(a&1&&u(0,"img",15),a&2){let e=c().$implicit;p("src",e.urlImagen,I)("alt",e.nombreApellido)}}function ge(a,t){a&1&&(o(0,"div",16),u(1,"i",29),r())}function ve(a,t){if(a&1){let e=x();o(0,"p-card",24)(1,"div",30)(2,"div",31),u(3,"i",32),o(4,"div")(5,"p",33)(6,"strong"),d(7),r()(),o(8,"small",34),d(9),r()()()(),o(10,"div",35)(11,"p-button",36),_("onClick",function(){v(e);let i=c().$implicit,l=c(2);return f(l.downloadDocument(i.id))}),r(),o(12,"p-button",37),_("onClick",function(){v(e);let i=c().$implicit,l=c(2);return f(l.viewDocument(i.id))}),r()()()}if(a&2){let e=c().$implicit,n=c(2);s(7),h(n.getDocument(e).nombre),s(2),h(n.getDocument(e).fechaSubida),s(2),p("rounded",!0)("outlined",!0),s(),p("rounded",!0)("outlined",!0)}}function fe(a,t){if(a&1){let e=x();o(0,"div",13)(1,"div",14),w(2,ue,1,2,"img",15)(3,ge,2,0,"div",16),r(),o(4,"div",17)(5,"div",18)(6,"div",19)(7,"div",20)(8,"div",21),d(9),r(),u(10,"p-tag",22),r(),o(11,"span",23),d(12),r(),u(13,"br"),o(14,"span",23),d(15),r()(),o(16,"div",19),w(17,ve,13,6,"p-card",24),r()(),o(18,"div",25)(19,"div",26)(20,"p-button",27),_("onClick",function(i){let l=v(e).$implicit,m=c(2);return f(m.validateOrganization(i,l.id))}),r(),o(21,"p-button",28),_("onClick",function(i){let l=v(e).$implicit,m=c(2);return f(m.rejectOrganization(i,l.id))}),r()()()()()}if(a&2){let e=t.$implicit,n=t.$index,i=c(2);S("mt-3",n!=0),s(2),b(e.urlImagen?2:3),s(7),h(e.nombreApellido),s(),p("value",e.estado==="RECHAZADO"||e.estado==="RECHAZADO_VISTO"?"RECHAZADO":e.estado)("severity",i.getEstadoSeverity(e.estado)),s(2),h(e.alias),s(3),h(e.fechaNacimiento),s(2),b(i.hasDocument(e)?17:-1),s(3),p("disabled",!i.hasDocument(e)||i.isButtonsDisabled(e)),s(),p("disabled",!i.hasDocument(e)||i.isButtonsDisabled(e))}}function _e(a,t){if(a&1&&(o(0,"div"),L(1,fe,22,11,"div",12,k),r()),a&2){let e=t.$implicit;S("p-3",!e),s(),R(e)}}function he(a,t){a&1&&(o(0,"div",38),T(),o(1,"svg",39)(2,"metadata"),d(3,"Created by potrace 1.10, written by Peter Selinger 2001-2011"),r(),o(4,"g",40),u(5,"path",41)(6,"path",42)(7,"path",43)(8,"path",44)(9,"path",45)(10,"path",46),r()(),D(),o(11,"h2"),d(12,"No hay organizaciones pendientes"),r(),o(13,"span"),d(14,"Todas las organizaciones han sido validadas o rechazadas."),r()())}var ce=class a{dataView;scrollContainer;router=g(j);toasts=g(q);loginService=g(G);permissionsService=g(Y);userService=g(Q);confirmationService=g(O);logedUser;organizations=[];ngOnInit(){this.loginService.getLoggedUser().subscribe(t=>{if(this.logedUser=t,t==null){this.router.navigate(["/login"]);return}if(!this.permissionsService.canAccessRoute(t,this.router.url)){this.router.navigate(["/principal"]);return}this.getInvalidOrganizations()})}getInvalidOrganizations(){this.userService.getFilteredUsers(!1,"ORGANIZACION").subscribe({next:t=>{this.organizations=t},error:()=>{this.toasts.showToast({severity:"error",summary:"Error al obtener organizaciones",detail:"No pudimos obtener las organizaciones no validadas, intente nuevamente..."})}})}hasDocument(t){return t.documentos&&t.documentos.length>0}getDocument(t){return t.documentos&&t.documentos.length>0?t.documentos[0]:null}getEstadoSeverity(t){switch(t){case"PENDIENTE":return"info";case"RECHAZADO":case"RECHAZADO_VISTO":return"danger";case"VALIDADO":return"success";case"SIN_DOCUMENTO":return"secondary";default:return"info"}}isButtonsDisabled(t){return t.estado==="RECHAZADO"||t.estado==="RECHAZADO_VISTO"}downloadDocument(t){let e=this.organizations.find(i=>i.id===t),n=e?this.getDocument(e):null;if(!n){this.toasts.showToast({severity:"warn",summary:"Sin documento",detail:"No hay documento disponible para descargar"});return}this.userService.downloadDocument(t,n.id).subscribe({next:i=>{let l=window.URL.createObjectURL(i),m=n.createElement("a");m.href=l,m.download=n.nombre||"documento.pdf",n.body.appendChild(m),m.click(),n.body.removeChild(m),window.URL.revokeObjectURL(l)},error:i=>{console.error("Error al descargar documento:",i),this.toasts.showToast({severity:"error",summary:"Error al descargar",detail:"No se pudo descargar el documento"})}})}viewDocument(t){let e=this.organizations.find(i=>i.id===t),n=e?this.getDocument(e):null;if(!n){this.toasts.showToast({severity:"warn",summary:"Sin documento",detail:"No hay documento disponible para visualizar"});return}this.userService.downloadDocument(t,n.id).subscribe({next:i=>{let l=window.URL.createObjectURL(i);window.open(l,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(l),1e3)},error:i=>{console.error("Error al visualizar documento:",i),this.toasts.showToast({severity:"error",summary:"Error al visualizar",detail:"No se pudo visualizar el documento"})}})}validateOrganization(t,e){this.confirmationService.confirm({target:t.target,message:"\xBFEst\xE1s seguro de validar esta organizaci\xF3n?",header:"Validar organizaci\xF3n",closable:!0,closeOnEscape:!0,icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Validar"},accept:()=>{this.userService.validateUser(e,"VALIDADO").subscribe({next:()=>{this.toasts.showToast({severity:"success",summary:"Organizaci\xF3n validada",detail:"Se valid\xF3 correctamente la organizaci\xF3n"}),this.getInvalidOrganizations()},error:()=>{this.toasts.showToast({severity:"error",summary:"Error al validar",detail:"Error al validar la organizaci\xF3n, intente nuevamente..."})}})},reject:()=>{}})}rejectOrganization(t,e){this.confirmationService.confirm({target:t.target,message:"\xBFEst\xE1s seguro de rechazar esta organizaci\xF3n?",header:"Rechazar organizaci\xF3n",closable:!0,closeOnEscape:!0,icon:"pi pi-exclamation-triangle",rejectButtonProps:{label:"Cancelar",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Rechazar",severity:"danger"},accept:()=>{this.userService.validateUser(e,"RECHAZADO").subscribe({next:()=>{this.toasts.showToast({severity:"success",summary:"Organizaci\xF3n rechazada",detail:"Se rechaz\xF3 correctamente la organizaci\xF3n"}),this.getInvalidOrganizations()},error:()=>{this.toasts.showToast({severity:"error",summary:"Error al rechazar",detail:"Error al rechazar la organizaci\xF3n, intente nuevamente..."})}})},reject:()=>{}})}goHome(){this.router.navigate(["/principal"])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=M({type:a,selectors:[["app-invalid-users-list"]],viewQuery:function(e,n){if(e&1&&(y(de,5),y(me,5)),e&2){let i;C(i=E())&&(n.dataView=i.first),C(i=E())&&(n.scrollContainer=i.first)}},features:[V([O])],decls:16,vars:4,consts:[["scrollContainer",""],["dv",""],["list",""],["emptymessage",""],["id","main",1,"main-container","container-fluid"],[1,"col-auto","justify-content-center","align-content-center","h-100"],[1,"d-flex","row","mb-2"],[1,"d-flex","align-items-center","mb-0"],[1,"pi","pi-chevron-left","me-3","go-back-buttom",3,"click"],[1,"row"],["layout","list","toggleButtonProps","",3,"value"],["target","parent","icon","pi pi-arrow-up",3,"threshold","buttonProps"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list",3,"mt-3"],[1,"d-flex","border","rounded","flex-row","p-3","gap-3","list"],[1,"position-relative"],[1,"d-block","mx-auto","rounded","image",3,"src","alt"],[1,"image","d-flex","align-items-center","justify-content-center","bg-secondary","rounded"],[1,"d-flex","flex-column","flex-sm-row","justify-content-between","align-items-start","flex-grow-1","gap-4"],[1,"d-flex","flex-row","flex-md-column","justify-content-evenly","align-items-start","gap-2","flex-grow-1"],[1,"flex-grow-1"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"fw-medium","fs-5"],[3,"value","severity"],[1,"fw-medium","text-secondary"],[1,"document-card"],[1,"d-flex","flex-column","align-items-md-end","gap-3"],[1,"d-flex","flex-row-reverse","flex-md-row","gap-2"],["icon","pi pi-check","label","Validar","severity","success",1,"flex-grow-1","flex-md-grow-0","text-nowrap",3,"onClick","disabled"],["icon","pi pi-times","label","Rechazar","severity","danger",1,"flex-grow-1","flex-md-grow-0","text-nowrap",3,"onClick","disabled"],[1,"pi","pi-user",2,"font-size","3rem","color","white"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","gap-2"],[1,"pi","pi-file-pdf",2,"font-size","1.5rem","color","#e74c3c"],[1,"m-0"],[1,"text-color-secondary"],[1,"d-flex","gap-2","mt-2"],["icon","pi pi-download","severity","info","size","small",3,"onClick","rounded","outlined"],["icon","pi pi-eye","size","small",3,"onClick","rounded","outlined"],[1,"row","py-3","justify-content-center","text-center"],["version","1.0","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 420 500","id","no-data-logo","width","150","height","150"],["transform","translate(0.000000,512.000000) scale(0.100000,-0.100000)","stroke","none"],["d","M2885 5114 c-220 -31 -373 -77 -528 -156 -407 -209 -693 -590 -784 -1045 -24 -123 -24 -413 0 -536 49 -244 180 -520 323 -680 19 -20 34 -40 34 -44 0 -4 -59 -67 -132 -140 l-131 -131 -39 26 c-47 30 -127 40 -184 22 -32 -10 -169 -142 -711 -683 -474 -473 -679 -685 -698 -719 -60 -110 -41 -234 49 -324 90 -90 214 -109 324 -49 34 19 246 224 719 698 541 542 673 679 683 711 18 57 8 137 -22 184 l-26 39 133 133 c124 123 135 132 153 119 10 -8 59 -45 108 -82 158 -120 380 -217 604 -264 118 -24 409 -24 533 0 607 121 1071 588 1183 1192 26 137 26 383 0 520 -111 597 -574 1069 -1162 1185 -104 21 -355 35 -429 24z m385 -149 c278 -54 496 -170 700 -375 206 -205 320 -419 376 -705 27 -134 24 -367 -5 -505 -74 -350 -283 -660 -573 -851 -114 -75 -157 -97 -278 -142 -159 -59 -280 -80 -465 -80 -182 0 -299 19 -458 77 -117 43 -169 69 -285 145 -295 194 -510 519 -578 871 -24 127 -24 361 0 485 35 183 107 360 211 515 57 85 200 238 278 298 198 153 434 251 679 282 98 12 294 5 398 -15z m-1653 -2728 c95 -95 95 -106 6 -198 l-67 -70 -103 103 -104 103 70 68 c92 90 102 89 198 -6z m-709 -915 c-443 -443 -560 -555 -591 -564 -99 -30 -201 65 -182 170 6 32 77 107 563 594 l557 558 102 -102 103 -103 -552 -553z"],["d","M2915 4833 c-130 -11 -309 -64 -438 -130 -60 -30 -160 -96 -188 -124 -25 -25 -24 -64 1 -89 28 -28 59 -25 106 9 254 187 592 251 899 170 369 -96 660 -387 754 -754 80 -310 17 -645 -170 -899 -34 -47 -37 -78 -9 -106 25 -25 64 -26 89 -1 53 53 129 185 181 315 75 189 96 456 51 664 -108 509 -520 882 -1040 942 -83 10 -153 10 -236 3z"],["d","M2102 4393 c-18 -7 -103 -135 -144 -218 -199 -399 -155 -890 113 -1245 347 -459 973 -608 1484 -352 90 45 211 126 219 147 11 30 6 55 -14 75 -27 27 -59 25 -101 -6 -354 -265 -852 -277 -1224 -29 -484 322 -614 983 -290 1470 30 46 55 93 55 104 0 42 -53 72 -98 54z"],["d","M2487 4042 c-33 -36 -22 -73 38 -132 l55 -54 -55 -56 c-63 -63 -73 -106 -33 -134 37 -26 60 -19 120 41 l57 57 60 -57 c65 -62 97 -71 131 -37 34 34 25 66 -37 131 l-57 60 53 51 c59 60 70 88 47 123 -12 18 -25 25 -49 25 -26 0 -43 -11 -87 -55 l-54 -54 -57 54 c-63 60 -102 71 -132 37z"],["d","M3186 4038 c-26 -37 -19 -60 41 -120 l57 -57 -57 -60 c-62 -65 -71 -97 -37 -131 34 -34 66 -25 130 36 l58 56 59 -56 c32 -31 67 -56 78 -56 36 0 65 28 65 63 0 26 -11 43 -55 87 l-55 54 55 56 c60 61 72 102 37 133 -34 31 -69 21 -131 -38 l-57 -54 -54 54 c-62 63 -106 74 -134 33z"],["d","M2923 3350 c-107 -20 -259 -97 -298 -153 -20 -29 -19 -70 3 -90 30 -27 70 -21 115 18 56 48 113 74 205 92 71 14 86 14 156 0 92 -19 147 -44 203 -92 65 -55 133 -40 133 29 0 53 -126 144 -250 180 -68 20 -199 28 -267 16z"]],template:function(e,n){if(e&1){let i=x();o(0,"div",4,0)(2,"div",5)(3,"div",6)(4,"h1",7)(5,"i",8),_("click",function(){return v(i),f(n.goHome())}),r(),d(6," Organizaciones no validadas "),r()(),o(7,"div",9)(8,"p-dataview",10,1),U(10,_e,3,2,"ng-template",null,2,z)(12,he,15,0,"ng-template",null,3,z),r()()(),u(14,"p-confirmdialog")(15,"p-scrolltop",11),r()}e&2&&(s(8),p("value",n.organizations),s(7),p("threshold",100)("buttonProps",P(3,pe)))},dependencies:[A,N,ne,ie,F,B,re,te,oe,K,J,ae,ee,Z,le,se,$,H,X,W],styles:["@media (max-width: 575px){.main-container[_ngcontent-%COMP%]{padding-top:2vh!important}  .p-panel-content{padding:0!important}}#main[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto}#no-data-logo[_ngcontent-%COMP%]{fill:var(--p-dataview-content-color);width:max-content;height:max-content}.go-back-buttom[_ngcontent-%COMP%]{cursor:pointer}  .p-dataview-header{background-color:transparent;border-radius:.5rem .5rem 0 0}  .p-dataview-content{background-color:transparent;padding:1rem;border-radius:0 0 .5rem .5rem;max-height:100%}  .p-panel-header{background-color:transparent;padding:0}  .p-panel-content{padding:1rem 0 0}  p-panel{background-color:transparent;border:none}.image[_ngcontent-%COMP%]{height:8vw!important;width:8vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.card-image[_ngcontent-%COMP%]{height:12vw!important;width:12vw!important;min-width:100px!important;min-height:100px!important;object-fit:cover}.list[_ngcontent-%COMP%]{border-color:var(--p-content-border-color)!important}.main-container[_ngcontent-%COMP%]{padding:4vh;height:max-content}.document-card[_ngcontent-%COMP%]{width:100%}  .document-card .p-card-body{padding:.5rem}  .document-card .p-card-content{padding:.5rem 0}"]})};export{ce as InvalidUsersList};
